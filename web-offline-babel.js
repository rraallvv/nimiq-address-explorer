require=function(){return function r(e,t,n){function o(a,s){if(!t[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[a]={exports:{}};e[a][0].call(c.exports,function(t){return o(e[a][1][t]||t)},c,c.exports,r,e,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}}()({1:[function(e,t,r){e("../../modules/es6.string.iterator");e("../../modules/es6.array.from");t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":21,"../../modules/es6.array.from":85,"../../modules/es6.string.iterator":97}],2:[function(e,t,r){e("../modules/web.dom.iterable");e("../modules/es6.string.iterator");t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":84,"../modules/es6.string.iterator":97,"../modules/web.dom.iterable":101}],3:[function(e,t,r){var n=e("../../modules/_core"),i=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function stringify(e){return i.stringify.apply(i,arguments)}},{"../../modules/_core":21}],4:[function(e,t,r){e("../../modules/es6.math.clz32");t.exports=e("../../modules/_core").Math.clz32},{"../../modules/_core":21,"../../modules/es6.math.clz32":87}],5:[function(e,t,r){e("../../modules/es6.math.fround");t.exports=e("../../modules/_core").Math.fround},{"../../modules/_core":21,"../../modules/es6.math.fround":88}],6:[function(e,t,r){e("../../modules/es6.math.imul");t.exports=e("../../modules/_core").Math.imul},{"../../modules/_core":21,"../../modules/es6.math.imul":89}],7:[function(e,t,r){e("../../modules/es6.math.trunc");t.exports=e("../../modules/_core").Math.trunc},{"../../modules/_core":21,"../../modules/es6.math.trunc":90}],8:[function(e,t,r){e("../../modules/es6.number.is-integer");t.exports=e("../../modules/_core").Number.isInteger},{"../../modules/_core":21,"../../modules/es6.number.is-integer":91}],9:[function(e,t,r){e("../../modules/es6.number.max-safe-integer");t.exports=9007199254740991},{"../../modules/es6.number.max-safe-integer":92}],10:[function(e,t,r){e("../../modules/es6.object.freeze");t.exports=e("../../modules/_core").Object.freeze},{"../../modules/_core":21,"../../modules/es6.object.freeze":93}],11:[function(e,t,r){e("../../modules/es6.object.keys");t.exports=e("../../modules/_core").Object.keys},{"../../modules/_core":21,"../../modules/es6.object.keys":94}],12:[function(e,t,r){e("../../modules/es7.object.values");t.exports=e("../../modules/_core").Object.values},{"../../modules/_core":21,"../../modules/es7.object.values":98}],13:[function(e,t,r){e("../modules/es6.object.to-string");e("../modules/es6.string.iterator");e("../modules/web.dom.iterable");e("../modules/es6.promise");e("../modules/es7.promise.finally");e("../modules/es7.promise.try");t.exports=e("../modules/_core").Promise},{"../modules/_core":21,"../modules/es6.object.to-string":95,"../modules/es6.promise":96,"../modules/es6.string.iterator":97,"../modules/es7.promise.finally":99,"../modules/es7.promise.try":100,"../modules/web.dom.iterable":101}],14:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],15:[function(e,t,r){t.exports=function(){}},{}],16:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||n!==undefined&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],17:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":40}],18:[function(e,t,r){var n=e("./_to-iobject"),i=e("./_to-length"),a=e("./_to-absolute-index");t.exports=function(e){return function(t,r,o){var s,u=n(t),l=i(u.length),c=a(o,l);if(e&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===r)return e||c||0;return!e&&-1}}},{"./_to-absolute-index":74,"./_to-iobject":76,"./_to-length":77}],19:[function(e,t,r){var n=e("./_cof"),i=e("./_wks")("toStringTag"),a="Arguments"==n(function(){return arguments}());t.exports=function(e){var t,r,o;return e===undefined?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(r){}}(t=Object(e),i))?r:a?n(t):"Object"==(o=n(t))&&"function"==typeof t.callee?"Arguments":o}},{"./_cof":20,"./_wks":82}],20:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],21:[function(e,t,r){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},{}],22:[function(e,t,r){"use strict";var n=e("./_object-dp"),i=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},{"./_object-dp":54,"./_property-desc":64}],23:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){n(e);if(t===undefined)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":14}],24:[function(e,t,r){t.exports=function(e){if(e==undefined)throw TypeError("Can't call method on  "+e);return e}},{}],25:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":29}],26:[function(e,t,r){var n=e("./_is-object"),i=e("./_global").document,a=n(i)&&n(i.createElement);t.exports=function(e){return a?i.createElement(e):{}}},{"./_global":31,"./_is-object":40}],27:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],28:[function(e,t,r){var n=e("./_global"),i=e("./_core"),a=e("./_ctx"),o=e("./_hide"),s=e("./_has"),u=function(e,t,r){var l,c,f,d=e&u.F,h=e&u.G,y=e&u.S,p=e&u.P,_=e&u.B,g=e&u.W,m=h?i:i[t]||(i[t]={}),v=m.prototype,w=h?n:y?n[t]:(n[t]||{}).prototype;h&&(r=t);for(l in r)if(!(c=!d&&w&&w[l]!==undefined)||!s(m,l)){f=c?w[l]:r[l];m[l]=h&&"function"!=typeof w[l]?r[l]:_&&c?a(f,n):g&&w[l]==f?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};t.prototype=e.prototype;return t}(f):p&&"function"==typeof f?a(Function.call,f):f;if(p){(m.virtual||(m.virtual={}))[l]=f;e&u.R&&v&&!v[l]&&o(v,l,f)}}};u.F=1;u.G=2;u.S=4;u.P=8;u.B=16;u.W=32;u.U=64;u.R=128;t.exports=u},{"./_core":21,"./_ctx":23,"./_global":31,"./_has":32,"./_hide":33}],29:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(t){return!0}}},{}],30:[function(e,t,r){var n=e("./_ctx"),i=e("./_iter-call"),a=e("./_is-array-iter"),o=e("./_an-object"),s=e("./_to-length"),u=e("./core.get-iterator-method"),l={},c={};(r=t.exports=function(e,t,r,f,d){var h,y,p,_,g=d?function(){return e}:u(e),m=n(r,f,t?2:1),v=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(a(g)){for(h=s(e.length);h>v;v++)if((_=t?m(o(y=e[v])[0],y[1]):m(e[v]))===l||_===c)return _}else for(p=g.call(e);!(y=p.next()).done;)if((_=i(p,m,y.value,t))===l||_===c)return _}).BREAK=l;r.RETURN=c},{"./_an-object":17,"./_ctx":23,"./_is-array-iter":38,"./_iter-call":41,"./_to-length":77,"./core.get-iterator-method":83}],31:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],32:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],33:[function(e,t,r){var n=e("./_object-dp"),i=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){e[t]=r;return e}},{"./_descriptors":25,"./_object-dp":54,"./_property-desc":64}],34:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":31}],35:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":25,"./_dom-create":26,"./_fails":29}],36:[function(e,t,r){t.exports=function(e,t,r){var n=r===undefined;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],37:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":20}],38:[function(e,t,r){var n=e("./_iterators"),i=e("./_wks")("iterator"),a=Array.prototype;t.exports=function(e){return e!==undefined&&(n.Array===e||a[i]===e)}},{"./_iterators":46,"./_wks":82}],39:[function(e,t,r){var n=e("./_is-object"),i=Math.floor;t.exports=function isInteger(e){return!n(e)&&isFinite(e)&&i(e)===e}},{"./_is-object":40}],40:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],41:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(o){var a=e["return"];a!==undefined&&n(a.call(e));throw o}}},{"./_an-object":17}],42:[function(e,t,r){"use strict";var n=e("./_object-create"),i=e("./_property-desc"),a=e("./_set-to-string-tag"),o={};e("./_hide")(o,e("./_wks")("iterator"),function(){return this});t.exports=function(e,t,r){e.prototype=n(o,{next:i(1,r)});a(e,t+" Iterator")}},{"./_hide":33,"./_object-create":53,"./_property-desc":64,"./_set-to-string-tag":68,"./_wks":82}],43:[function(e,t,r){"use strict";var n=e("./_library"),i=e("./_export"),a=e("./_redefine"),o=e("./_hide"),s=e("./_iterators"),u=e("./_iter-create"),l=e("./_set-to-string-tag"),c=e("./_object-gpo"),f=e("./_wks")("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(e,t,r,y,p,_,g){u(r,t,y);var m,v,w,b=function(e){if(!d&&e in A)return A[e];switch(e){case"keys":return function keys(){return new r(this,e)};case"values":return function values(){return new r(this,e)}}return function entries(){return new r(this,e)}},k=t+" Iterator",S="values"==p,E=!1,A=e.prototype,P=A[f]||A["@@iterator"]||p&&A[p],I=P||b(p),C=p?S?b("entries"):I:undefined,U="Array"==t&&A.entries||P;if(U&&(w=c(U.call(new e)))!==Object.prototype&&w.next){l(w,k,!0);n||"function"==typeof w[f]||o(w,f,h)}if(S&&P&&"values"!==P.name){E=!0;I=function values(){return P.call(this)}}n&&!g||!d&&!E&&A[f]||o(A,f,I);s[t]=I;s[k]=h;if(p){m={values:S?I:b("values"),keys:_?I:b("keys"),entries:C};if(g)for(v in m)v in A||a(A,v,m[v]);else i(i.P+i.F*(d||E),t,m)}return m}},{"./_export":28,"./_hide":33,"./_iter-create":42,"./_iterators":46,"./_library":47,"./_object-gpo":56,"./_redefine":66,"./_set-to-string-tag":68,"./_wks":82}],44:[function(e,t,r){var n=e("./_wks")("iterator"),i=!1;try{var a=[7][n]();a["return"]=function(){i=!0};Array.from(a,function(){throw 2})}catch(o){}t.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var a=[7],s=a[n]();s.next=function(){return{done:r=!0}};a[n]=function(){return s};e(a)}catch(o){}return r}},{"./_wks":82}],45:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],46:[function(e,t,r){t.exports={}},{}],47:[function(e,t,r){t.exports=!0},{}],48:[function(e,t,r){var n=e("./_math-sign"),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),u=i(2,-126);t.exports=Math.fround||function fround(e){var t,r,i=Math.abs(e),l=n(e);return i<u?l*(i/u/o+1/a-1/a)*u*o:(r=(t=(1+o/a)*i)-(t-i))>s||r!=r?l*Infinity:l*r}},{"./_math-sign":49}],49:[function(e,t,r){t.exports=Math.sign||function sign(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},{}],50:[function(e,t,r){var n=e("./_uid")("meta"),i=e("./_is-object"),a=e("./_has"),o=e("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},l=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),c=function(e){o(e,n,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!u(e))return"F";if(!t)return"E";c(e)}return e[n].i},getWeak:function(e,t){if(!a(e,n)){if(!u(e))return!0;if(!t)return!1;c(e)}return e[n].w},onFreeze:function(e){l&&f.NEED&&u(e)&&!a(e,n)&&c(e);return e}}},{"./_fails":29,"./_has":32,"./_is-object":40,"./_object-dp":54,"./_uid":80}],51:[function(e,t,r){var n=e("./_global"),i=e("./_task").set,a=n.MutationObserver||n.WebKitMutationObserver,o=n.process,s=n.Promise,u="process"==e("./_cof")(o);t.exports=function(){var e,t,r,l=function(){var n,i;u&&(n=o.domain)&&n.exit();for(;e;){i=e.fn;e=e.next;try{i()}catch(a){e?r():t=undefined;throw a}}t=undefined;n&&n.enter()};if(u)r=function(){o.nextTick(l)};else if(!a||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(undefined);r=function(){c.then(l)}}else r=function(){i.call(n,l)};else{var f=!0,d=document.createTextNode("");new a(l).observe(d,{characterData:!0});r=function(){d.data=f=!f}}return function(n){var i={fn:n,next:undefined};t&&(t.next=i);if(!e){e=i;r()}t=i}}},{"./_cof":20,"./_global":31,"./_task":73}],52:[function(e,t,r){"use strict";var n=e("./_a-function");function PromiseCapability(e){var t,r;this.promise=new e(function(e,n){if(t!==undefined||r!==undefined)throw TypeError("Bad Promise constructor");t=e;r=n});this.resolve=n(t);this.reject=n(r)}t.exports.f=function(e){return new PromiseCapability(e)}},{"./_a-function":14}],53:[function(e,t,r){var n=e("./_an-object"),i=e("./_object-dps"),a=e("./_enum-bug-keys"),o=e("./_shared-key")("IE_PROTO"),s=function(){},u=function(){var t,r=e("./_dom-create")("iframe"),n=a.length;r.style.display="none";e("./_html").appendChild(r);r.src="javascript:";(t=r.contentWindow.document).open();t.write("<script>document.F=Object<\/script>");t.close();u=t.F;for(;n--;)delete u.prototype[a[n]];return u()};t.exports=Object.create||function create(e,t){var r;if(null!==e){s.prototype=n(e);r=new s;s.prototype=null;r[o]=e}else r=u();return t===undefined?r:i(r,t)}},{"./_an-object":17,"./_dom-create":26,"./_enum-bug-keys":27,"./_html":34,"./_object-dps":55,"./_shared-key":69}],54:[function(e,t,r){var n=e("./_an-object"),i=e("./_ie8-dom-define"),a=e("./_to-primitive"),o=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function defineProperty(e,t,r){n(e);t=a(t,!0);n(r);if(i)try{return o(e,t,r)}catch(s){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");"value"in r&&(e[t]=r.value);return e}},{"./_an-object":17,"./_descriptors":25,"./_ie8-dom-define":35,"./_to-primitive":79}],55:[function(e,t,r){var n=e("./_object-dp"),i=e("./_an-object"),a=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function defineProperties(e,t){i(e);for(var r,o=a(t),s=o.length,u=0;s>u;)n.f(e,r=o[u++],t[r]);return e}},{"./_an-object":17,"./_descriptors":25,"./_object-dp":54,"./_object-keys":58}],56:[function(e,t,r){var n=e("./_has"),i=e("./_to-object"),a=e("./_shared-key")("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(e){e=i(e);return n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},{"./_has":32,"./_shared-key":69,"./_to-object":78}],57:[function(e,t,r){var n=e("./_has"),i=e("./_to-iobject"),a=e("./_array-includes")(!1),o=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=i(e),u=0,l=[];for(r in s)r!=o&&n(s,r)&&l.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~a(l,r)||l.push(r));return l}},{"./_array-includes":18,"./_has":32,"./_shared-key":69,"./_to-iobject":76}],58:[function(e,t,r){var n=e("./_object-keys-internal"),i=e("./_enum-bug-keys");t.exports=Object.keys||function keys(e){return n(e,i)}},{"./_enum-bug-keys":27,"./_object-keys-internal":57}],59:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],60:[function(e,t,r){var n=e("./_export"),i=e("./_core"),a=e("./_fails");t.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],o={};o[e]=t(r);n(n.S+n.F*a(function(){r(1)}),"Object",o)}},{"./_core":21,"./_export":28,"./_fails":29}],61:[function(e,t,r){var n=e("./_descriptors"),i=e("./_object-keys"),a=e("./_to-iobject"),o=e("./_object-pie").f;t.exports=function(e){return function(t){for(var r,s=a(t),u=i(s),l=u.length,c=0,f=[];l>c;){r=u[c++];n&&!o.call(s,r)||f.push(e?[r,s[r]]:s[r])}return f}}},{"./_descriptors":25,"./_object-keys":58,"./_object-pie":59,"./_to-iobject":76}],62:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},{}],63:[function(e,t,r){var n=e("./_an-object"),i=e("./_is-object"),a=e("./_new-promise-capability");t.exports=function(e,t){n(e);if(i(t)&&t.constructor===e)return t;var r=a.f(e);(0,r.resolve)(t);return r.promise}},{"./_an-object":17,"./_is-object":40,"./_new-promise-capability":52}],64:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],65:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},{"./_hide":33}],66:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":33}],67:[function(e,t,r){"use strict";var n=e("./_global"),i=e("./_core"),a=e("./_object-dp"),o=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":21,"./_descriptors":25,"./_global":31,"./_object-dp":54,"./_wks":82}],68:[function(e,t,r){var n=e("./_object-dp").f,i=e("./_has"),a=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},{"./_has":32,"./_object-dp":54,"./_wks":82}],69:[function(e,t,r){var n=e("./_shared")("keys"),i=e("./_uid");t.exports=function(e){return n[e]||(n[e]=i(e))}},{"./_shared":70,"./_uid":80}],70:[function(e,t,r){var n=e("./_core"),i=e("./_global"),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(e,t){return a[e]||(a[e]=t!==undefined?t:{})})("versions",[]).push({version:n.version,mode:e("./_library")?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},{"./_core":21,"./_global":31,"./_library":47}],71:[function(e,t,r){var n=e("./_an-object"),i=e("./_a-function"),a=e("./_wks")("species");t.exports=function(e,t){var r,o=n(e).constructor;return o===undefined||(r=n(o)[a])==undefined?t:i(r)}},{"./_a-function":14,"./_an-object":17,"./_wks":82}],72:[function(e,t,r){var n=e("./_to-integer"),i=e("./_defined");t.exports=function(e){return function(t,r){var a,o,s=String(i(t)),u=n(r),l=s.length;return u<0||u>=l?e?"":undefined:(a=s.charCodeAt(u))<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?e?s.charAt(u):a:e?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},{"./_defined":24,"./_to-integer":75}],73:[function(e,t,r){var n,i,a,o=e("./_ctx"),s=e("./_invoke"),u=e("./_html"),l=e("./_dom-create"),c=e("./_global"),f=c.process,d=c.setImmediate,h=c.clearImmediate,y=c.MessageChannel,p=c.Dispatch,_=0,g={},m=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e];t()}},v=function(e){m.call(e.data)};if(!d||!h){d=function setImmediate(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);g[++_]=function(){s("function"==typeof e?e:Function(e),t)};n(_);return _};h=function clearImmediate(e){delete g[e]};if("process"==e("./_cof")(f))n=function(e){f.nextTick(o(m,e,1))};else if(p&&p.now)n=function(e){p.now(o(m,e,1))};else if(y){a=(i=new y).port2;i.port1.onmessage=v;n=o(a.postMessage,a,1)}else if(c.addEventListener&&"function"==typeof postMessage&&!c.importScripts){n=function(e){c.postMessage(e+"","*")};c.addEventListener("message",v,!1)}else n="onreadystatechange"in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this);m.call(e)}}:function(e){setTimeout(o(m,e,1),0)}}t.exports={set:d,clear:h}},{"./_cof":20,"./_ctx":23,"./_dom-create":26,"./_global":31,"./_html":34,"./_invoke":36}],74:[function(e,t,r){var n=e("./_to-integer"),i=Math.max,a=Math.min;t.exports=function(e,t){return(e=n(e))<0?i(e+t,0):a(e,t)}},{"./_to-integer":75}],75:[function(e,t,r){var n=Math.ceil,i=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},{}],76:[function(e,t,r){var n=e("./_iobject"),i=e("./_defined");t.exports=function(e){return n(i(e))}},{"./_defined":24,"./_iobject":37}],77:[function(e,t,r){var n=e("./_to-integer"),i=Math.min;t.exports=function(e){return e>0?i(n(e),9007199254740991):0}},{"./_to-integer":75}],78:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":24}],79:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":40}],80:[function(e,t,r){var n=0,i=Math.random();t.exports=function(e){return"Symbol(".concat(e===undefined?"":e,")_",(++n+i).toString(36))}},{}],81:[function(e,t,r){var n=e("./_global").navigator;t.exports=n&&n.userAgent||""},{"./_global":31}],82:[function(e,t,r){var n=e("./_shared")("wks"),i=e("./_uid"),a=e("./_global").Symbol,o="function"==typeof a;(t.exports=function(e){return n[e]||(n[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=n},{"./_global":31,"./_shared":70,"./_uid":80}],83:[function(e,t,r){var n=e("./_classof"),i=e("./_wks")("iterator"),a=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(e!=undefined)return e[i]||e["@@iterator"]||a[n(e)]}},{"./_classof":19,"./_core":21,"./_iterators":46,"./_wks":82}],84:[function(e,t,r){var n=e("./_an-object"),i=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":17,"./_core":21,"./core.get-iterator-method":83}],85:[function(e,t,r){"use strict";var n=e("./_ctx"),i=e("./_export"),a=e("./_to-object"),o=e("./_iter-call"),s=e("./_is-array-iter"),u=e("./_to-length"),l=e("./_create-property"),c=e("./core.get-iterator-method");i(i.S+i.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function from(e){var t,r,i,f,d=a(e),h="function"==typeof this?this:Array,y=arguments.length,p=y>1?arguments[1]:undefined,_=p!==undefined,g=0,m=c(d);_&&(p=n(p,y>2?arguments[2]:undefined,2));if(m==undefined||h==Array&&s(m))for(r=new h(t=u(d.length));t>g;g++)l(r,g,_?p(d[g],g):d[g]);else for(f=m.call(d),r=new h;!(i=f.next()).done;g++)l(r,g,_?o(f,p,[i.value,g],!0):i.value);r.length=g;return r}})},{"./_create-property":22,"./_ctx":23,"./_export":28,"./_is-array-iter":38,"./_iter-call":41,"./_iter-detect":44,"./_to-length":77,"./_to-object":78,"./core.get-iterator-method":83}],86:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),i=e("./_iter-step"),a=e("./_iterators"),o=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=o(e);this._i=0;this._k=t},function(){var e=this._t,t=this._k,r=this._i++;if(!e||r>=e.length){this._t=undefined;return i(1)}return i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])},"values");a.Arguments=a.Array;n("keys");n("values");n("entries")},{"./_add-to-unscopables":15,"./_iter-define":43,"./_iter-step":45,"./_iterators":46,"./_to-iobject":76}],87:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{clz32:function clz32(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},{"./_export":28}],88:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{fround:e("./_math-fround")})},{"./_export":28,"./_math-fround":48}],89:[function(e,t,r){var n=e("./_export"),i=Math.imul;n(n.S+n.F*e("./_fails")(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function imul(e,t){var r=+e,n=+t,i=65535&r,a=65535&n;return 0|i*a+((65535&r>>>16)*a+i*(65535&n>>>16)<<16>>>0)}})},{"./_export":28,"./_fails":29}],90:[function(e,t,r){var n=e("./_export");n(n.S,"Math",{trunc:function trunc(e){return(e>0?Math.floor:Math.ceil)(e)}})},{"./_export":28}],91:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{isInteger:e("./_is-integer")})},{"./_export":28,"./_is-integer":39}],92:[function(e,t,r){var n=e("./_export");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":28}],93:[function(e,t,r){var n=e("./_is-object"),i=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function freeze(t){return e&&n(t)?e(i(t)):t}})},{"./_is-object":40,"./_meta":50,"./_object-sap":60}],94:[function(e,t,r){var n=e("./_to-object"),i=e("./_object-keys");e("./_object-sap")("keys",function(){return function keys(e){return i(n(e))}})},{"./_object-keys":58,"./_object-sap":60,"./_to-object":78}],95:[function(e,t,r){},{}],96:[function(e,t,r){"use strict";var n,i,a,o,s=e("./_library"),u=e("./_global"),l=e("./_ctx"),c=e("./_classof"),f=e("./_export"),d=e("./_is-object"),h=e("./_a-function"),y=e("./_an-instance"),p=e("./_for-of"),_=e("./_species-constructor"),g=e("./_task").set,m=e("./_microtask")(),v=e("./_new-promise-capability"),w=e("./_perform"),b=e("./_user-agent"),k=e("./_promise-resolve"),S=u.TypeError,E=u.process,A=E&&E.versions,P=A&&A.v8||"",I=u.Promise,C="process"==c(E),U=function(){},x=i=v.f,T=!!function(){try{var t=I.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(U,U)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(U)instanceof r&&0!==P.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(n){}}(),N=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var r=e._c;m(function(){for(var n=e._v,i=1==e._s,a=0,o=function(t){var r,a,o,s=i?t.ok:t.fail,u=t.resolve,l=t.reject,c=t.domain;try{if(s){if(!i){2==e._h&&B(e);e._h=1}if(!0===s)r=n;else{c&&c.enter();r=s(n);if(c){c.exit();o=!0}}r===t.promise?l(S("Promise-chain cycle")):(a=N(r))?a.call(r,u,l):u(r)}else l(n)}catch(f){c&&!o&&c.exit();l(f)}};r.length>a;)o(r[a++]);e._c=[];e._n=!1;t&&!e._h&&z(e)})}},z=function(e){g.call(u,function(){var t,r,n,i=e._v,a=O(e);if(a){t=w(function(){C?E.emit("unhandledRejection",i,e):(r=u.onunhandledrejection)?r({promise:e,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)});e._h=C||O(e)?2:1}e._a=undefined;if(a&&t.e)throw t.v})},O=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){g.call(u,function(){var t;C?E.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;if(!t._d){t._d=!0;(t=t._w||t)._v=e;t._s=2;t._a||(t._a=t._c.slice());M(t,!0)}},j=function(e){var t,r=this;if(!r._d){r._d=!0;r=r._w||r;try{if(r===e)throw S("Promise can't be resolved itself");if(t=N(e))m(function(){var n={_w:r,_d:!1};try{t.call(e,l(j,n,1),l(L,n,1))}catch(i){L.call(n,i)}});else{r._v=e;r._s=1;M(r,!1)}}catch(n){L.call({_w:r,_d:!1},n)}}};if(!T){I=function Promise(e){y(this,I,"Promise","_h");h(e);n.call(this);try{e(l(j,this,1),l(L,this,1))}catch(t){L.call(this,t)}};(n=function Promise(e){this._c=[];this._a=undefined;this._s=0;this._d=!1;this._v=undefined;this._h=0;this._n=!1}).prototype=e("./_redefine-all")(I.prototype,{then:function then(e,t){var r=x(_(this,I));r.ok="function"!=typeof e||e;r.fail="function"==typeof t&&t;r.domain=C?E.domain:undefined;this._c.push(r);this._a&&this._a.push(r);this._s&&M(this,!1);return r.promise},"catch":function(e){return this.then(undefined,e)}});a=function(){var e=new n;this.promise=e;this.resolve=l(j,e,1);this.reject=l(L,e,1)};v.f=x=function(e){return e===I||e===o?new a(e):i(e)}}f(f.G+f.W+f.F*!T,{Promise:I});e("./_set-to-string-tag")(I,"Promise");e("./_set-species")("Promise");o=e("./_core").Promise;f(f.S+f.F*!T,"Promise",{reject:function reject(e){var t=x(this);(0,t.reject)(e);return t.promise}});f(f.S+f.F*(s||!T),"Promise",{resolve:function resolve(e){return k(s&&this===o?I:this,e)}});f(f.S+f.F*!(T&&e("./_iter-detect")(function(e){I.all(e)["catch"](U)})),"Promise",{all:function all(e){var t=this,r=x(t),n=r.resolve,i=r.reject,a=w(function(){var r=[],a=0,o=1;p(e,!1,function(e){var s=a++,u=!1;r.push(undefined);o++;t.resolve(e).then(function(e){if(!u){u=!0;r[s]=e;--o||n(r)}},i)});--o||n(r)});a.e&&i(a.v);return r.promise},race:function race(e){var t=this,r=x(t),n=r.reject,i=w(function(){p(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});i.e&&n(i.v);return r.promise}})},{"./_a-function":14,"./_an-instance":16,"./_classof":19,"./_core":21,"./_ctx":23,"./_export":28,"./_for-of":30,"./_global":31,"./_is-object":40,"./_iter-detect":44,"./_library":47,"./_microtask":51,"./_new-promise-capability":52,"./_perform":62,"./_promise-resolve":63,"./_redefine-all":65,"./_set-species":67,"./_set-to-string-tag":68,"./_species-constructor":71,"./_task":73,"./_user-agent":81,"./_wks":82}],97:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e);this._i=0},function(){var e,t=this._t,r=this._i;if(r>=t.length)return{value:undefined,done:!0};e=n(t,r);this._i+=e.length;return{value:e,done:!1}})},{"./_iter-define":43,"./_string-at":72}],98:[function(e,t,r){var n=e("./_export"),i=e("./_object-to-array")(!1);n(n.S,"Object",{values:function values(e){return i(e)}})},{"./_export":28,"./_object-to-array":61}],99:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_core"),a=e("./_global"),o=e("./_species-constructor"),s=e("./_promise-resolve");n(n.P+n.R,"Promise",{"finally":function(e){var t=o(this,i.Promise||a.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},{"./_core":21,"./_export":28,"./_global":31,"./_promise-resolve":63,"./_species-constructor":71}],100:[function(e,t,r){"use strict";var n=e("./_export"),i=e("./_new-promise-capability"),a=e("./_perform");n(n.S,"Promise",{"try":function(e){var t=i.f(this),r=a(e);(r.e?t.reject:t.resolve)(r.v);return t.promise}})},{"./_export":28,"./_new-promise-capability":52,"./_perform":62}],101:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),i=e("./_hide"),a=e("./_iterators"),o=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var l=s[u],c=n[l],f=c&&c.prototype;f&&!f[o]&&i(f,o,l);a[l]=a.Array}},{"./_global":31,"./_hide":33,"./_iterators":46,"./_wks":82,"./es6.array.iterator":86}],102:[function(e,t,r){var n=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function wrap(e,t,r,n){var i=t&&t.prototype instanceof Generator?t:Generator,a=Object.create(i.prototype),o=new Context(n||[]);a._invoke=function makeInvokeMethod(e,t,r){var n=u;return function invoke(i,a){if(n===c)throw new Error("Generator is already running");if(n===f){if("throw"===i)throw a;return doneResult()}r.method=i;r.arg=a;for(;;){var o=r.delegate;if(o){var s=maybeInvokeDelegate(o,r);if(s){if(s===d)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u){n=f;throw r.arg}r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=c;var h=tryCatch(e,t,r);if("normal"===h.type){n=r.done?f:l;if(h.arg===d)continue;return{value:h.arg,done:r.done}}if("throw"===h.type){n=f;r.method="throw";r.arg=h.arg}}}}(e,r,o);return a}e.wrap=wrap;function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}var u="suspendedStart",l="suspendedYield",c="executing",f="completed",d={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var h={};h[a]=function(){return this};var y=Object.getPrototypeOf,p=y&&y(y(values([])));p&&p!==r&&n.call(p,a)&&(h=p);var _=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(h);GeneratorFunction.prototype=_.constructor=GeneratorFunctionPrototype;GeneratorFunctionPrototype.constructor=GeneratorFunction;GeneratorFunctionPrototype[s]=GeneratorFunction.displayName="GeneratorFunction";function defineIteratorMethods(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))};e.mark=function(e){if(Object.setPrototypeOf)Object.setPrototypeOf(e,GeneratorFunctionPrototype);else{e.__proto__=GeneratorFunctionPrototype;s in e||(e[s]="GeneratorFunction")}e.prototype=Object.create(_);return e};e.awrap=function(e){return{__await:e}};function AsyncIterator(e){var t;this._invoke=function enqueue(r,i){function callInvokeWithMethodAndArg(){return new Promise(function(t,a){!function invoke(t,r,i,a){var o=tryCatch(e[t],e,r);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"==typeof u&&n.call(u,"__await")?Promise.resolve(u.__await).then(function(e){invoke("next",e,i,a)},function(e){invoke("throw",e,i,a)}):Promise.resolve(u).then(function(e){s.value=e;i(s)},function(e){return invoke("throw",e,i,a)})}a(o.arg)}(r,i,t,a)})}return t=t?t.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}defineIteratorMethods(AsyncIterator.prototype);AsyncIterator.prototype[o]=function(){return this};e.AsyncIterator=AsyncIterator;e.async=function(t,r,n,i){var a=new AsyncIterator(wrap(t,r,n,i));return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})};function maybeInvokeDelegate(e,r){var n=e.iterator[r.method];if(n===t){r.delegate=null;if("throw"===r.method){if(e.iterator["return"]){r.method="return";r.arg=t;maybeInvokeDelegate(e,r);if("throw"===r.method)return d}r.method="throw";r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=tryCatch(n,e.iterator,r.arg);if("throw"===i.type){r.method="throw";r.arg=i.arg;r.delegate=null;return d}var a=i.arg;if(!a){r.method="throw";r.arg=new TypeError("iterator result is not an object");r.delegate=null;return d}if(!a.done)return a;r[e.resultName]=a.value;r.next=e.nextLoc;if("return"!==r.method){r.method="next";r.arg=t}r.delegate=null;return d}defineIteratorMethods(_);_[s]="Generator";_[a]=function(){return this};_.toString=function(){return"[object Generator]"};function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]);if(2 in e){t.finallyLoc=e[2];t.afterLoc=e[3]}this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal";delete t.arg;e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}];e.forEach(pushTryEntry,this);this.reset(!0)}e.keys=function(e){var t=[];for(var r in e)t.push(r);t.reverse();return function next(){for(;t.length;){var r=t.pop();if(r in e){next.value=r;next.done=!1;return next}}next.done=!0;return next}};function values(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function next(){for(;++i<e.length;)if(n.call(e,i)){next.value=e[i];next.done=!1;return next}next.value=t;next.done=!0;return next};return o.next=o}}return{next:doneResult}}e.values=values;function doneResult(){return{value:t,done:!0}}Context.prototype={constructor:Context,reset:function(e){this.prev=0;this.next=0;this.sent=this._sent=t;this.done=!1;this.delegate=null;this.method="next";this.arg=t;this.tryEntries.forEach(resetTryEntry);if(!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function handle(n,i){o.type="throw";o.arg=e;r.next=n;if(i){r.method="next";r.arg=t}return!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};o.type=e;o.arg=t;if(a){this.method="next";this.next=a.finallyLoc;return d}return this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;if("break"===e.type||"continue"===e.type)this.next=e.arg;else if("return"===e.type){this.rval=this.arg=e.arg;this.method="return";this.next="end"}else"normal"===e.type&&t&&(this.next=t);return d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e){this.complete(r.completion,r.afterLoc);resetTryEntry(r);return d}}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;resetTryEntry(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){this.delegate={iterator:values(e),resultName:r,nextLoc:n};"next"===this.method&&(this.arg=t);return d}};return e}("object"==typeof t?t.exports:{});try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},{}],"@babel/runtime-corejs2/core-js/array/from":[function(e,t,r){t.exports=e("core-js/library/fn/array/from")},{"core-js/library/fn/array/from":1}],"@babel/runtime-corejs2/core-js/get-iterator":[function(e,t,r){t.exports=e("core-js/library/fn/get-iterator")},{"core-js/library/fn/get-iterator":2}],"@babel/runtime-corejs2/core-js/json/stringify":[function(e,t,r){t.exports=e("core-js/library/fn/json/stringify")},{"core-js/library/fn/json/stringify":3}],"@babel/runtime-corejs2/core-js/math/clz32":[function(e,t,r){t.exports=e("core-js/library/fn/math/clz32")},{"core-js/library/fn/math/clz32":4}],"@babel/runtime-corejs2/core-js/math/fround":[function(e,t,r){t.exports=e("core-js/library/fn/math/fround")},{"core-js/library/fn/math/fround":5}],"@babel/runtime-corejs2/core-js/math/imul":[function(e,t,r){t.exports=e("core-js/library/fn/math/imul")},{"core-js/library/fn/math/imul":6}],"@babel/runtime-corejs2/core-js/math/trunc":[function(e,t,r){t.exports=e("core-js/library/fn/math/trunc")},{"core-js/library/fn/math/trunc":7}],"@babel/runtime-corejs2/core-js/number/is-integer":[function(e,t,r){t.exports=e("core-js/library/fn/number/is-integer")},{"core-js/library/fn/number/is-integer":8}],"@babel/runtime-corejs2/core-js/number/max-safe-integer":[function(e,t,r){t.exports=e("core-js/library/fn/number/max-safe-integer")},{"core-js/library/fn/number/max-safe-integer":9}],"@babel/runtime-corejs2/core-js/object/freeze":[function(e,t,r){t.exports=e("core-js/library/fn/object/freeze")},{"core-js/library/fn/object/freeze":10}],"@babel/runtime-corejs2/core-js/object/keys":[function(e,t,r){t.exports=e("core-js/library/fn/object/keys")},{"core-js/library/fn/object/keys":11}],"@babel/runtime-corejs2/core-js/object/values":[function(e,t,r){t.exports=e("core-js/library/fn/object/values")},{"core-js/library/fn/object/values":12}],"@babel/runtime-corejs2/core-js/promise":[function(e,t,r){t.exports=e("core-js/library/fn/promise")},{"core-js/library/fn/promise":13}],"@babel/runtime-corejs2/helpers/asyncToGenerator":[function(e,t,r){var n=e("../core-js/promise");function asyncGeneratorStep(e,t,r,i,a,o,s){try{var u=e[o](s),l=u.value}catch(c){r(c);return}u.done?t(l):n.resolve(l).then(i,a)}t.exports=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new n(function(n,i){var a=e.apply(t,r);function _next(e){asyncGeneratorStep(a,n,i,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,n,i,_next,_throw,"throw",e)}_next(undefined)})}}},{"../core-js/promise":"@babel/runtime-corejs2/core-js/promise"}],"@babel/runtime-corejs2/regenerator":[function(e,t,r){t.exports=e("regenerator-runtime")},{"regenerator-runtime":102}]},{},[]);var Proxy,_interopRequireDefault=require("@babel/runtime-corejs2/helpers/interopRequireDefault"),_getOwnPropertyNames=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/object/get-own-property-names")),_assertThisInitialized2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/assertThisInitialized")),_get2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/get")),_freeze=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/object/freeze")),_isArray=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/array/is-array")),_maxSafeInteger=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/number/max-safe-integer")),_isInteger=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/number/is-integer")),_possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/possibleConstructorReturn")),_getPrototypeOf2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/getPrototypeOf")),_inherits2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/inherits")),_wrapNativeSuper2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/wrapNativeSuper")),_getIterator2=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/get-iterator")),_from=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/array/from")),_regenerator=_interopRequireDefault(require("@babel/runtime-corejs2/regenerator")),_asyncToGenerator2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/asyncToGenerator")),_promise=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/promise")),_map=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/map")),_parseInt2=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/parse-int")),_stringify=_interopRequireDefault(require("@babel/runtime-corejs2/core-js/json/stringify")),_typeof2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/typeof")),_classCallCheck2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime-corejs2/helpers/createClass"));if("undefined"==typeof Nimiq)var Nimiq="undefined"!=typeof window?window:{};!function(e){(Nimiq=e="undefined"!=typeof e?e:{})._currentScript||(Nimiq._currentScript=document.currentScript);if(!Nimiq._currentScript){var t=document.getElementsByTagName("script");Nimiq._currentScript=t[t.length-1]}Nimiq._path||(Nimiq._currentScript&&-1!==Nimiq._currentScript.src.indexOf("/")?Nimiq._path=Nimiq._currentScript.src.substring(0,Nimiq._currentScript.src.lastIndexOf("/")+1):Nimiq._path="./");var r=function(){function Class(){(0,_classCallCheck2["default"])(this,Class)}(0,_createClass2["default"])(Class,null,[{key:"register",value:function register(t){"undefined"!=typeof e&&(e[t.name]=t)}},{key:"scope",get:function get(){return"undefined"!=typeof e?e:"undefined"!=typeof self?self:window}}]);return Class}();r.register(r);var n=function(){function LogNative(){(0,_classCallCheck2["default"])(this,LogNative);this._global_level=i.INFO;this._tag_levels={};try{if(window.localStorage)try{var e=window.localStorage.getItem("log_tag_levels");e&&"string"==typeof e&&(e=JSON.parse(e));e&&"object"===(0,_typeof2["default"])(e)&&(this._tag_levels=e)}catch(t){console.warn("Failed to load log configuration from local storage.")}}catch(t){}}(0,_createClass2["default"])(LogNative,[{key:"isLoggable",value:function isLoggable(e,t){return e&&this._tag_levels[e]?this._tag_levels[e]<=t:this._tag_levels["*"]?this._tag_levels["*"]<=t:this._global_level<=t}},{key:"setLoggable",value:function setLoggable(e,t){e&&e.name&&(e=e.name);this._tag_levels[e]=t;window.localStorage&&window.localStorage.setItem("log_tag_levels",(0,_stringify["default"])(this._tag_levels))}},{key:"msg",value:function msg(e,t,r){t&&t.name&&(t=t.name);if(this.isLoggable(t,e)){t&&r.unshift(t+":");r.unshift("[".concat(i.Level.toStringTag(e)," ").concat((new Date).toTimeString().substr(0,8),"]"));console.error&&e>=i.ERROR?console.error.apply(console,r):console.warn&&e>=i.WARNING?console.warn.apply(console,r):console.info&&e>=i.INFO?console.info.apply(console,r):console.debug&&e>=i.DEBUG?console.debug.apply(console,r):console.trace&&e<=i.TRACE?console.trace.apply(console,r):console.log.apply(console,r)}}}]);return LogNative}();r.register(n);var i=function(){(0,_createClass2["default"])(Log,null,[{key:"instance",get:function get(){Log._instance||(Log._instance=new Log(new n));return Log._instance}}]);function Log(e){(0,_classCallCheck2["default"])(this,Log);this._native=e}(0,_createClass2["default"])(Log,[{key:"setLoggable",value:function setLoggable(e,t){this._native.setLoggable(e,Log.Level.get(t))}},{key:"msg",value:function msg(e,t,r){if(this._native.isLoggable(t,e)){for(var n=0;n<r.length;++n){"function"==typeof r[n]&&(r[n]=r[n]());"object"===(0,_typeof2["default"])(r[n])&&("function"==typeof r[n].toString?r[n]=r[n].toString():r[n].constructor&&r[n].constructor.name?r[n]="{Object: ".concat(r[n].constructor.name,"}"):r[n]="{Object}")}this._native.msg(e,t,r)}}},{key:"level",get:function get(){return this._native._global_level},set:function set(e){this._native._global_level=Log.Level.get(e)}}],[{key:"d",value:function d(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(arguments.length>=2){e=arguments[0];n=Array.prototype.slice.call(arguments,1)}else{e=undefined;n=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.DEBUG,e,n)}},{key:"e",value:function e(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(arguments.length>=2){t=arguments[0];i=Array.prototype.slice.call(arguments,1)}else{t=undefined;i=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.ERROR,t,i)}},{key:"i",value:function i(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];if(arguments.length>=2){e=arguments[0];n=Array.prototype.slice.call(arguments,1)}else{e=undefined;n=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.INFO,e,n)}},{key:"v",value:function v(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(arguments.length>=2){e=arguments[0];n=Array.prototype.slice.call(arguments,1)}else{e=undefined;n=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.VERBOSE,e,n)}},{key:"w",value:function w(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if(arguments.length>=2){e=arguments[0];n=Array.prototype.slice.call(arguments,1)}else{e=undefined;n=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.WARNING,e,n)}},{key:"t",value:function t(e,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];if(arguments.length>=2){e=arguments[0];i=Array.prototype.slice.call(arguments,1)}else{e=undefined;i=Array.prototype.slice.call(arguments,0)}Log.instance.msg(Log.TRACE,e,i)}}]);return Log}();i.Level={TRACE:1,VERBOSE:2,DEBUG:3,INFO:4,WARNING:5,ERROR:6,ASSERT:7,toStringTag:function toStringTag(e){switch(e){case i.Level.TRACE:return"T";case i.Level.VERBOSE:return"V";case i.Level.DEBUG:return"D";case i.Level.INFO:return"I";case i.Level.WARNING:return"W";case i.Level.ERROR:return"E";case i.Level.ASSERT:return"A";default:return"*"}},toString:function toString(e){switch(e){case i.Level.TRACE:return"trace";case i.Level.VERBOSE:return"verbose";case i.Level.DEBUG:return"debug";case i.Level.INFO:return"info";case i.Level.WARNING:return"warn";case i.Level.ERROR:return"error";case i.Level.ASSERT:return"assert";default:return"unknown"}},get:function get(e){if("number"==typeof e)return e;if(!isNaN((0,_parseInt2["default"])(e)))return(0,_parseInt2["default"])(e);switch(e.toLowerCase()){case"t":case"trace":return i.Level.TRACE;case"v":case"verbose":return i.Level.VERBOSE;case"d":case"debug":return i.Level.DEBUG;case"i":case"info":return i.Level.INFO;case"w":case"warn":case"warning":return i.Level.WARNING;case"e":case"error":case"exception":return i.Level.ERROR;case"a":case"assert":case"assertion":return i.Level.ASSERT}return 0}};i.TRACE=i.Level.TRACE;i.VERBOSE=i.Level.VERBOSE;i.DEBUG=i.Level.DEBUG;i.INFO=i.Level.INFO;i.WARNING=i.Level.WARNING;i.ERROR=i.Level.ERROR;i.ASSERT=i.Level.ASSERT;i._instance=null;i.d.tag=function(e){return i.d.bind(null,e)};i.e.tag=function(e){return i.e.bind(null,e)};i.i.tag=function(e){return i.i.bind(null,e)};i.v.tag=function(e){return i.v.bind(null,e)};i.w.tag=function(e){return i.w.bind(null,e)};i.t.tag=function(e){return i.t.bind(null,e)};r.register(i);var a=function(){(0,_createClass2["default"])(Observable,null,[{key:"WILDCARD",get:function get(){return"*"}}]);function Observable(){(0,_classCallCheck2["default"])(this,Observable);this._listeners=new _map["default"]}(0,_createClass2["default"])(Observable,[{key:"_offAll",value:function _offAll(){this._listeners.clear()}},{key:"on",value:function on(e,t){if(this._listeners.has(e))return this._listeners.get(e).push(t)-1;this._listeners.set(e,[t]);return 0}},{key:"off",value:function off(e,t){this._listeners.has(e)&&this._listeners.get(e)[t]&&delete this._listeners.get(e)[t]}},{key:"fire",value:function fire(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=[];if(this._listeners.has(e)){var a=this._listeners.get(e);for(var o in a)if(a.hasOwnProperty(o)){var s=a[o].apply(null,r);s instanceof _promise["default"]&&i.push(s)}}if(this._listeners.has(Observable.WILDCARD)){var u=this._listeners.get(Observable.WILDCARD);for(var l in u)if(u.hasOwnProperty(l)){var c=u[l].apply(null,arguments);c instanceof _promise["default"]&&i.push(c)}}return i.length>0?_promise["default"].all(i):null}},{key:"bubble",value:function bubble(e){for(var t=this,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];for(var a=function _loop(){var r=s[o],n=void 0;n=r===Observable.WILDCARD?function callback(){this.fire.apply(this,arguments)}:function callback(){this.fire.apply(this,[r].concat(Array.prototype.slice.call(arguments)))};e.on(r,n.bind(t))},o=0,s=n;o<s.length;o++)a()}}]);return Observable}();r.register(a);var o=function(){function CryptoLib(){(0,_classCallCheck2["default"])(this,CryptoLib)}(0,_createClass2["default"])(CryptoLib,null,[{key:"instance",get:function get(){if(!CryptoLib._instance){var e={};e.getRandomValues=(window.crypto||window.msCrypto).getRandomValues.bind(window.crypto);CryptoLib._instance=e}return CryptoLib._instance}}]);return CryptoLib}();o._instance=null;r.register(o);var s=function(){function PlatformUtils(){(0,_classCallCheck2["default"])(this,PlatformUtils)}(0,_createClass2["default"])(PlatformUtils,null,[{key:"isBrowser",value:function isBrowser(){return!0}},{key:"isWeb",value:function isWeb(){return"undefined"!=typeof window}},{key:"isNodeJs",value:function isNodeJs(){return!1}},{key:"supportsWebRTC",value:function supportsWebRTC(){var e=PlatformUtils.isBrowser()?window.RTCPeerConnection||window.webkitRTCPeerConnection:null;return!!e&&"function"==typeof e.prototype.createDataChannel}},{key:"supportsWS",value:function supportsWS(){return location&&"http:"===location.protocol}},{key:"isOnline",value:function isOnline(){return!("onLine"in window.navigator)||window.navigator.onLine}},{key:"isWindows",value:function isWindows(){return/^win/.test(window.navigator.platform)}},{key:"userAgentString",get:function get(){try{return window.navigator.platform}catch(e){return"unknown"}}},{key:"hardwareConcurrency",get:function get(){return"object"===("undefined"==typeof navigator?"undefined":(0,_typeof2["default"])(navigator))&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:1}}]);return PlatformUtils}();r.register(s);var u=function(){function WasmHelper(){(0,_classCallCheck2["default"])(this,WasmHelper)}(0,_createClass2["default"])(WasmHelper,null,[{key:"doImport",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee(){return _regenerator["default"].wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",WasmHelper.doImportBrowser());case 1:case"end":return e.stop()}},_callee)}));return function doImport(){return e.apply(this,arguments)}}()},{key:"doImportBrowser",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee3(){return _regenerator["default"].wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:WasmHelper._importBrowserPromise=WasmHelper._importBrowserPromise||(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee2(){return _regenerator["default"].wrap(function _callee2$(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return WasmHelper.importWasmBrowser("worker-wasm.wasm");case 2:if(!e.sent){e.next=7;break}e.next=5;return WasmHelper.importScriptBrowser("worker-wasm.js");case 5:e.next=9;break;case 7:e.next=9;return WasmHelper.importScriptBrowser("worker-js.js");case 9:case"end":return e.stop()}},_callee2)}))();e.prev=1;e.next=4;return WasmHelper._importBrowserPromise;case 4:e.next=10;break;case 6:e.prev=6;e.t0=e["catch"](1);WasmHelper._importBrowserPromise=null;throw e.t0;case 10:case"end":return e.stop()}},_callee3,null,[[1,6]])}));return function doImportBrowser(){return e.apply(this,arguments)}}()},{key:"importWasm",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee4(e){var t,r=arguments;return _regenerator["default"].wrap(function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:t=r.length>1&&r[1]!==undefined?r[1]:"Module";return n.abrupt("return",WasmHelper.importWasmBrowser(e,t));case 2:case"end":return n.stop()}},_callee4)}));return function importWasm(t){return e.apply(this,arguments)}}()},{key:"importWasmBrowser",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee5(e){var t,r=arguments;return _regenerator["default"].wrap(function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:t=r.length>1&&r[1]!==undefined?r[1]:"Module";e=WasmHelper._adjustWasmPath(e);if(WasmHelper._global.WebAssembly){n.next=5;break}i.w(WasmHelper,"No support for WebAssembly available.");return n.abrupt("return",_promise["default"].resolve(!1));case 5:return n.abrupt("return",new _promise["default"](function(r){try{var n=new XMLHttpRequest;n.open("GET",e,!0);n.responseType="arraybuffer";n.onload=function(){WasmHelper._global[t]=WasmHelper._global[t]||{};WasmHelper._global[t].wasmBinary=n.response;r(!0)};n.onerror=function(){i.w(WasmHelper,"Failed to access WebAssembly module ".concat(e));r(!1)};n.send(null)}catch(a){i.w(WasmHelper,"Failed to access WebAssembly module ".concat(e));r(!1)}}));case 6:case"end":return n.stop()}},_callee5)}));return function importWasmBrowser(t){return e.apply(this,arguments)}}()},{key:"importScript",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee6(e){var t,r=arguments;return _regenerator["default"].wrap(function _callee6$(n){for(;;)switch(n.prev=n.next){case 0:t=r.length>1&&r[1]!==undefined?r[1]:"Module";return n.abrupt("return",WasmHelper.importScriptBrowser(e,t));case 2:case"end":return n.stop()}},_callee6)}));return function importScript(t){return e.apply(this,arguments)}}()},{key:"importScriptBrowser",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee8(e){var t,r,n=arguments;return _regenerator["default"].wrap(function _callee8$(i){for(;;)switch(i.prev=i.next){case 0:if(!((t=n.length>1&&n[1]!==undefined?n[1]:"Module")&&WasmHelper._global[t]&&WasmHelper._global[t].asm)){i.next=3;break}return i.abrupt("return",!1);case 3:e=WasmHelper._adjustScriptPath(e);r=WasmHelper._global[t]||{};return i.abrupt("return",new _promise["default"](function(){var n=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee7(n,i){var a;return _regenerator["default"].wrap(function _callee7$(o){for(;;)switch(o.prev=o.next){case 0:a=new _promise["default"](function(e){r.onRuntimeInitialized=function(){return e(!0)}});if("function"!=typeof importScripts){o.next=7;break}o.next=4;return new _promise["default"](function(r){WasmHelper._moduleLoadedCallbacks[t]=r;importScripts(e)});case 4:WasmHelper._global[t]=WasmHelper._global[t](r);o.next=19;break;case 7:if("object"!==("undefined"==typeof window?"undefined":(0,_typeof2["default"])(window))){o.next=13;break}o.next=10;return new _promise["default"](function(r){WasmHelper._moduleLoadedCallbacks[t]=r;WasmHelper._loadBrowserScript(e)});case 10:WasmHelper._global[t]=WasmHelper._global[t](r);o.next=19;break;case 13:if("function"!=typeof require){o.next=17;break}WasmHelper._global[t]=require(e)(r);o.next=19;break;case 17:i("No way to load scripts.");return o.abrupt("return");case 19:o.next=21;return a;case 21:r.asm&&!WasmHelper._global[t].asm&&(WasmHelper._global[t]=r);n(!0);case 23:case"end":return o.stop()}},_callee7)}));return function(e,t){return n.apply(this,arguments)}}()));case 6:case"end":return i.stop()}},_callee8)}));return function importScriptBrowser(t){return e.apply(this,arguments)}}()},{key:"fireModuleLoaded",value:function fireModuleLoaded(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"Module";if("function"==typeof WasmHelper._moduleLoadedCallbacks[e]){WasmHelper._moduleLoadedCallbacks[e]();WasmHelper._moduleLoadedCallbacks[e]=null}}},{key:"_loadBrowserScript",value:function _loadBrowserScript(e){var t=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript";r.src=e;t.appendChild(r)}},{key:"_adjustWasmPath",value:function _adjustWasmPath(e){"undefined"!=typeof Nimiq&&Nimiq._path&&(e="".concat(Nimiq._path).concat(e));"string"==typeof __dirname&&-1===e.indexOf("/")&&(e="".concat(__dirname,"/").concat(e));return e}},{key:"_adjustScriptPath",value:function _adjustScriptPath(e){"undefined"!=typeof Nimiq&&Nimiq._path&&(e="".concat(Nimiq._path).concat(e));"string"==typeof __dirname&&-1===e.indexOf("/")&&(e="".concat(__dirname,"/").concat(e));return e}},{key:"_global",get:function get(){return"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:null}}]);return WasmHelper}();u._moduleLoadedCallbacks={};r.register(u);var l=function(){function ArrayUtils(){(0,_classCallCheck2["default"])(this,ArrayUtils)}(0,_createClass2["default"])(ArrayUtils,null,[{key:"randomElement",value:function randomElement(e){return e[Math.floor(Math.random()*e.length)]}},{key:"subarray",value:function subarray(e,t,r){function clamp(e,t,r){return e<t?t:e>r?r:e}t===undefined&&(t=0);r===undefined&&(r=e.byteLength);t=clamp(t,0,e.byteLength);var n=(r=clamp(r,0,e.byteLength))-t;n<0&&(n=0);return new Uint8Array(e.buffer,e.byteOffset+t,n)}},{key:"k_combinations",value:_regenerator["default"].mark(function k_combinations(e,t){var r,n,i,a,o;return _regenerator["default"].wrap(function k_combinations$(s){for(;;)switch(s.prev=s.next){case 0:r=e.length;if(!(t>r)){s.next=3;break}return s.abrupt("return");case 3:n=(0,_from["default"])(new Array(t),function(e,t){return t});s.next=6;return n.map(function(t){return e[t]});case 6:i=(0,_from["default"])(new Array(t),function(e,r){return t-r-1});a=_regenerator["default"].mark(function _loop2(){var a,o,s,u,l,c,f,d,h,y;return _regenerator["default"].wrap(function _loop2$(p){for(;;)switch(p.prev=p.next){case 0:a=t-1,o=!1;s=!0;u=!1;l=undefined;p.prev=4;c=(0,_getIterator2["default"])(i);case 6:if(s=(f=c.next()).done){p.next=14;break}a=f.value;if(n[a]===a+r-t){p.next=11;break}o=!0;return p.abrupt("break",14);case 11:s=!0;p.next=6;break;case 14:p.next=20;break;case 16:p.prev=16;p.t0=p["catch"](4);u=!0;l=p.t0;case 20:p.prev=20;p.prev=21;s||null==c["return"]||c["return"]();case 23:p.prev=23;if(!u){p.next=26;break}throw l;case 26:return p.finish(23);case 27:return p.finish(20);case 28:if(o){p.next=30;break}return p.abrupt("return",{v:void 0});case 30:n[a]+=1;for(d=0,h=(0,_from["default"])(new Array(t-a-1),function(e,t){return a+t+1});d<h.length;d++){y=h[d];n[y]=n[y-1]+1}p.next=34;return n.map(function(t){return e[t]});case 34:case"end":return p.stop()}},_loop2,null,[[4,16,20,28],[21,,23,27]])});case 8:0;return s.delegateYield(a(),"t0",10);case 10:o=s.t0;if("object"!==(0,_typeof2["default"])(o)){s.next=13;break}return s.abrupt("return",o.v);case 13:s.next=8;break;case 15:case"end":return s.stop()}},k_combinations)})}]);return ArrayUtils}();r.register(l);var c=function(){function Assert(){(0,_classCallCheck2["default"])(this,Assert)}(0,_createClass2["default"])(Assert,null,[{key:"that",value:function that(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"Assertion failed";if(!e)throw new Error(t)}}]);return Assert}();r.register(c);var f=function(){function BufferUtils(){(0,_classCallCheck2["default"])(this,BufferUtils)}(0,_createClass2["default"])(BufferUtils,null,[{key:"toAscii",value:function toAscii(e){for(var t=BufferUtils._toUint8View(e),r="",n=0;n<t.length;n+=8192)r+=String.fromCharCode.apply(null,t.subarray(n,n+8192));return r}},{key:"fromAscii",value:function fromAscii(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;++r)t[r]=e.charCodeAt(r);return t}},{key:"_codePointTextDecoder",value:function _codePointTextDecoder(e){if("undefined"==typeof TextDecoder)throw new Error("TextDecoder not supported");if(null===BufferUtils._ISO_8859_15_DECODER)throw new Error("TextDecoder does not support iso-8859-15");if(BufferUtils._ISO_8859_15_DECODER===undefined)try{BufferUtils._ISO_8859_15_DECODER=new TextDecoder("iso-8859-15")}catch(r){BufferUtils._ISO_8859_15_DECODER=null;throw new Error("TextDecoder does not support iso-8859-15")}var t=BufferUtils._toUint8View(e);return BufferUtils._ISO_8859_15_DECODER.decode(t).replace("â¬","Â¤").replace("Å ","Â¦").replace("Å¡","Â¨").replace("Å½","Â´").replace("Å¾","Â¸").replace("Å","Â¼").replace("Å","Â½").replace("Å¸","Â¾")}},{key:"_tripletToBase64",value:function _tripletToBase64(e){return BufferUtils._BASE64_LOOKUP[e>>18&63]+BufferUtils._BASE64_LOOKUP[e>>12&63]+BufferUtils._BASE64_LOOKUP[e>>6&63]+BufferUtils._BASE64_LOOKUP[63&e]}},{key:"_base64encodeChunk",value:function _base64encodeChunk(e,t,r){for(var n,i=[],a=t;a<r;a+=3){n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]);i.push(BufferUtils._tripletToBase64(n))}return i.join("")}},{key:"_base64fromByteArray",value:function _base64fromByteArray(e){for(var t,r=e.length,n=r%3,i="",a=[],o=0,s=r-n;o<s;o+=16383)a.push(BufferUtils._base64encodeChunk(e,o,o+16383>s?s:o+16383));if(1===n){t=e[r-1];i+=BufferUtils._BASE64_LOOKUP[t>>2];i+=BufferUtils._BASE64_LOOKUP[t<<4&63];i+="=="}else if(2===n){t=(e[r-2]<<8)+e[r-1];i+=BufferUtils._BASE64_LOOKUP[t>>10];i+=BufferUtils._BASE64_LOOKUP[t>>4&63];i+=BufferUtils._BASE64_LOOKUP[t<<2&63];i+="="}a.push(i);return a.join("")}},{key:"toBase64",value:function toBase64(e){if(s.isNodeJs())return Buffer.from(e).toString("base64");if("undefined"!=typeof TextDecoder&&null!==BufferUtils._ISO_8859_15_DECODER)try{return btoa(BufferUtils._codePointTextDecoder(e))}catch(t){}return BufferUtils._base64fromByteArray(BufferUtils._toUint8View(e))}},{key:"fromBase64",value:function fromBase64(e,t){var r=Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)});if(t!==undefined&&r.length!==t)throw new Error("Decoded length does not match expected length");return new y(r)}},{key:"toBase64Url",value:function toBase64Url(e){return BufferUtils.toBase64(e).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,".")}},{key:"fromBase64Url",value:function fromBase64Url(e,t){return BufferUtils.fromBase64(e.replace(/_/g,"/").replace(/-/g,"+").replace(/\./g,"="),t)}},{key:"toBase32",value:function toBase32(e){var t,r,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:BufferUtils.BASE32_ALPHABET.NIMIQ,i=3,a=0,o="";for(r=0;r<e.length;r++){o+=n[31&(a|(t=e[r])>>i)];i>5&&(o+=n[31&t>>(i-=5)]);a=t<<(i=5-i);i=8-i}3!==i&&(o+=n[31&a]);for(;o.length%8!=0&&33===n.length;)o+=n[32];return o}},{key:"fromBase32",value:function fromBase32(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:BufferUtils.BASE32_ALPHABET.NIMIQ,r=[];t.toUpperCase().split("").forEach(function(e,t){e in r||(r[e]=t)});var n,i=8,a=0,o=[];e.toUpperCase().split("").forEach(function(e){if(33!==t.length||e!==t[32]){n=255&r[e];if((i-=5)>0)a|=n<<i;else if(i<0){o.push(a|n>>-i);a=n<<(i+=8)&255}else{o.push(a|n);i=8;a=0}}});8!==i&&0!==a&&o.push(a);return new Uint8Array(o)}},{key:"toHex",value:function toHex(e){for(var t="",r=0;r<e.length;r++){var n=e[r];t+=BufferUtils.HEX_ALPHABET[n>>>4];t+=BufferUtils.HEX_ALPHABET[15&n]}return t}},{key:"fromHex",value:function fromHex(e,t){e=e.trim();if(!b.isHexBytes(e,t))throw new Error("String is not an hex string (of matching length)");return new y(Uint8Array.from(e.match(/.{2}/g)||[],function(e){return(0,_parseInt2["default"])(e,16)}))}},{key:"toBinary",value:function toBinary(e){for(var t="",r=0;r<e.length;r++){var n=e[r];t+=b.lpad(n.toString(2),"0",8)}return t}},{key:"_strToUint8Array",value:function _strToUint8Array(e){for(var t=[],r=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)t[r++]=i;else if(i<2048){t[r++]=i>>6|192;t[r++]=63&i|128}else if(55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))){i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t[r++]=i>>18|240;t[r++]=i>>12&63|128;t[r++]=i>>6&63|128;t[r++]=63&i|128}else{t[r++]=i>>12|224;t[r++]=i>>6&63|128;t[r++]=63&i|128}}return new Uint8Array(t)}},{key:"_utf8TextEncoder",value:function _utf8TextEncoder(e){if("undefined"==typeof TextEncoder)throw new Error("TextEncoder not supported");if(null===BufferUtils._UTF8_ENCODER)throw new Error("TextEncoder does not support utf8");if(BufferUtils._UTF8_ENCODER===undefined)try{BufferUtils._UTF8_ENCODER=new TextEncoder}catch(t){BufferUtils._UTF8_ENCODER=null;throw new Error("TextEncoder does not support utf8")}return BufferUtils._UTF8_ENCODER.encode(e)}},{key:"fromUtf8",value:function fromUtf8(e){if(s.isNodeJs())return Buffer.from(e);if("undefined"!=typeof TextEncoder&&null!==BufferUtils._UTF8_ENCODER)try{return BufferUtils._utf8TextEncoder(e)}catch(t){}return BufferUtils._strToUint8Array(e)}},{key:"fromAny",value:function fromAny(e,t){if(""===e)return y.EMPTY;if(!e)throw new Error("Invalid buffer format");if(e instanceof Uint8Array)return new y(e);try{return BufferUtils.fromHex(e,t)}catch(r){}try{return BufferUtils.fromBase64(e,t)}catch(r){}throw new Error("Invalid buffer format")}},{key:"concatTypedArrays",value:function concatTypedArrays(e,t){var r=new e.constructor(e.length+t.length);r.set(e,0);r.set(t,e.length);return r}},{key:"equals",value:function equals(e,t){if((e.byteLength||e.length)!==(t.byteLength||t.length))return!1;for(var r=BufferUtils._toUint8View(e),n=BufferUtils._toUint8View(t),i=0;i<r.length;i++)if(r[i]!==n[i])return!1;return!0}},{key:"compare",value:function compare(e,t){if(e.length<t.length)return-1;if(e.length>t.length)return 1;for(var r=0;r<e.length;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0}},{key:"xor",value:function xor(e,t){for(var r=new Uint8Array(e.byteLength),n=0;n<e.byteLength;++n)r[n]=e[n]^t[n];return r}},{key:"_toUint8View",value:function _toUint8View(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer):Uint8Array.from(e)}}]);return BufferUtils}();f.BASE64_ALPHABET="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";f.BASE32_ALPHABET={RFC4648:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",RFC4648_HEX:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",NIMIQ:"0123456789ABCDEFGHJKLMNPQRSTUVXY"};f.HEX_ALPHABET="0123456789abcdef";f._BASE64_LOOKUP=[];for(var d=0,h=f.BASE64_ALPHABET.length;d<h;++d)f._BASE64_LOOKUP[d]=f.BASE64_ALPHABET[d];r.register(f);var y=function(e){(0,_inherits2["default"])(SerialBuffer,e);function SerialBuffer(e){var t;(0,_classCallCheck2["default"])(this,SerialBuffer);(t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(SerialBuffer).call(this,e)))._view=new DataView(t.buffer);t._readPos=0;t._writePos=0;return t}(0,_createClass2["default"])(SerialBuffer,[{key:"subarray",value:function subarray(e,t){return l.subarray(this,e,t)}},{key:"reset",value:function reset(){this._readPos=0;this._writePos=0}},{key:"read",value:function read(e){var t=this.subarray(this._readPos,this._readPos+e);this._readPos+=e;return new Uint8Array(t)}},{key:"write",value:function write(e){this.set(e,this._writePos);this._writePos+=e.byteLength}},{key:"readUint8",value:function readUint8(){return this._view.getUint8(this._readPos++)}},{key:"writeUint8",value:function writeUint8(e){this._view.setUint8(this._writePos++,e)}},{key:"readUint16",value:function readUint16(){var e=this._view.getUint16(this._readPos);this._readPos+=2;return e}},{key:"writeUint16",value:function writeUint16(e){this._view.setUint16(this._writePos,e);this._writePos+=2}},{key:"readUint32",value:function readUint32(){var e=this._view.getUint32(this._readPos);this._readPos+=4;return e}},{key:"writeUint32",value:function writeUint32(e){this._view.setUint32(this._writePos,e);this._writePos+=4}},{key:"readUint64",value:function readUint64(){var e=this._view.getUint32(this._readPos)*Math.pow(2,32)+this._view.getUint32(this._readPos+4);if(!g.isUint64(e))throw new Error("Malformed value");this._readPos+=8;return e}},{key:"writeUint64",value:function writeUint64(e){if(!g.isUint64(e))throw new Error("Malformed value");this._view.setUint32(this._writePos,Math.floor(e/Math.pow(2,32)));this._view.setUint32(this._writePos+4,e);this._writePos+=8}},{key:"readVarUint",value:function readVarUint(){var e=this.readUint8();return e<253?e:253===e?this.readUint16():254===e?this.readUint32():this.readUint64()}},{key:"writeVarUint",value:function writeVarUint(e){if(!g.isUint64(e))throw new Error("Malformed value");if(e<253)this.writeUint8(e);else if(e<=65535){this.writeUint8(253);this.writeUint16(e)}else if(e<=4294967295){this.writeUint8(254);this.writeUint32(e)}else{this.writeUint8(255);this.writeUint64(e)}}},{key:"readFloat64",value:function readFloat64(){var e=this._view.getFloat64(this._readPos);this._readPos+=8;return e}},{key:"writeFloat64",value:function writeFloat64(e){this._view.setFloat64(this._writePos,e);this._writePos+=8}},{key:"readString",value:function readString(e){var t=this.read(e);return f.toAscii(t)}},{key:"writeString",value:function writeString(e,t){if(b.isMultibyte(e)||e.length!==t)throw new Error("Malformed value/length");var r=f.fromAscii(e);this.write(r)}},{key:"readPaddedString",value:function readPaddedString(e){for(var t=this.read(e),r=0;r<e&&0!==t[r];)r++;var n=new Uint8Array(t.buffer,t.byteOffset,r);return f.toAscii(n)}},{key:"writePaddedString",value:function writePaddedString(e,t){if(b.isMultibyte(e)||e.length>t)throw new Error("Malformed value/length");var r=f.fromAscii(e);this.write(r);var n=t-r.byteLength;this.write(new Uint8Array(n))}},{key:"readVarLengthString",value:function readVarLengthString(){var e=this.readUint8();if(this._readPos+e>this.length)throw new Error("Malformed length");var t=this.read(e);return f.toAscii(t)}},{key:"writeVarLengthString",value:function writeVarLengthString(e){if(b.isMultibyte(e)||!g.isUint8(e.length))throw new Error("Malformed value");var t=f.fromAscii(e);this.writeUint8(t.byteLength);this.write(t)}},{key:"readPos",get:function get(){return this._readPos},set:function set(e){if(e<0||e>this.byteLength)throw"Invalid readPos ".concat(e);this._readPos=e}},{key:"writePos",get:function get(){return this._writePos},set:function set(e){if(e<0||e>this.byteLength)throw"Invalid writePos ".concat(e);this._writePos=e}}],[{key:"varUintSize",value:function varUintSize(e){if(!g.isUint64(e))throw new Error("Malformed value");return e<253?1:e<=65535?3:e<=4294967295?5:9}},{key:"varLengthStringSize",value:function varLengthStringSize(e){if(b.isMultibyte(e)||!g.isUint8(e.length))throw new Error("Malformed value");return 1+e.length}}]);return SerialBuffer}((0,_wrapNativeSuper2["default"])(Uint8Array));y.EMPTY=new y(0);r.register(y);var p=function(){function CRC8(){(0,_classCallCheck2["default"])(this,CRC8)}(0,_createClass2["default"])(CRC8,null,[{key:"_createTable",value:function _createTable(){for(var e=[],t=0;t<256;++t){for(var r=t,n=0;n<8;++n)r=0!=(128&r)?(r<<1^151)%256:(r<<1)%256;e[t]=r}return e}},{key:"compute",value:function compute(e){CRC8._table||(CRC8._table=CRC8._createTable());for(var t=0,r=0;r<e.length;r++)t=CRC8._table[(t^e[r])%256];return t}}]);return CRC8}();p._table=null;r.register(p);!function(e){"use strict";var t,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",s=1e14,u=14,l=9007199254740991,c=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,d=1e9;function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){for(var t,r,n=1,i=e.length,a=e[0]+"";n<i;){t=e[n++]+"";r=u-t.length;for(;r--;t="0"+t);a+=t}for(i=a.length;48===a.charCodeAt(--i););return a.slice(0,i+1||1)}function compare(e,t){var r,n,i=e.c,a=t.c,o=e.s,s=t.s,u=e.e,l=t.e;if(!o||!s)return null;r=i&&!i[0];n=a&&!a[0];if(r||n)return r?n?0:-s:o;if(o!=s)return o;r=o<0;n=u==l;if(!i||!a)return n?0:!i^r?1:-1;if(!n)return u>l^r?1:-1;s=(u=i.length)<(l=a.length)?u:l;for(o=0;o<s;o++)if(i[o]!=a[o])return i[o]>a[o]^r?1:-1;return u==l?0:u>l^r?1:-1}function intCheck(e,t,r,o){if(e<t||e>r||e!==(e<0?n(e):i(e)))throw Error(a+(o||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+e)}function isArray(e){return"[object Array]"==Object.prototype.toString.call(e)}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/u)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(t=function clone(e){var t,h,y,p,_,g,m,v,w,b=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},k=new BigNumber(1),S=20,E=4,A=-7,P=21,I=-1e7,C=1e7,U=!1,x=1,T=0,N={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"Â ",fractionGroupSize:0},M="0123456789abcdefghijklmnopqrstuvwxyz";function BigNumber(e,t){var n,a,s,c,f,d,p,_=this;if(!(_ instanceof BigNumber))return new BigNumber(e,t);if(null==t){if(e instanceof BigNumber){_.s=e.s;_.e=e.e;_.c=(e=e.c)?e.slice():e;return}if((f="number"==typeof e)&&0*e==0){_.s=1/e<0?(e=-e,-1):1;if(e===~~e){for(s=0,c=e;c>=10;c/=10,s++);_.e=s;_.c=[e];return}p=e+""}else{if(!r.test(p=e+""))return y(_,p,f);_.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}}else{intCheck(t,2,M.length,"Base");p=e+"";if(10==t)return round(_=new BigNumber(e instanceof BigNumber?e:p),S+_.e+1,E);if(f="number"==typeof e){if(0*e!=0)return y(_,p,f,t);_.s=1/e<0?(p=p.slice(1),-1):1;if(BigNumber.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+e);f=!1}else{_.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;t>10&&t<37&&(p=p.toLowerCase())}n=M.slice(0,t);s=c=0;for(d=p.length;c<d;c++)if(n.indexOf(a=p.charAt(c))<0){if("."==a&&c>s){s=d;continue}return y(_,e+"",f,t)}p=h(p,t,10,_.s)}(s=p.indexOf("."))>-1&&(p=p.replace(".",""));if((c=p.search(/e/i))>0){s<0&&(s=c);s+=+p.slice(c+1);p=p.substring(0,c)}else s<0&&(s=p.length);for(c=0;48===p.charCodeAt(c);c++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(c,++d)){d-=c;if(f&&BigNumber.DEBUG&&d>15&&(e>l||e!==i(e)))throw Error(o+_.s*e);if((s=s-c-1)>C)_.c=_.e=null;else if(s<I)_.c=[_.e=0];else{_.e=s;_.c=[];c=(s+1)%u;s<0&&(c+=u);if(c<d){c&&_.c.push(+p.slice(0,c));for(d-=u;c<d;)_.c.push(+p.slice(c,c+=u));p=p.slice(c);c=u-p.length}else c-=d;for(;c--;p+="0");_.c.push(+p)}}else _.c=[_.e=0]}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(e){var t,r;if(null!=e){if("object"!=(0,_typeof2["default"])(e))throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")){intCheck(r=e[t],0,d,t);S=r}if(e.hasOwnProperty(t="ROUNDING_MODE")){intCheck(r=e[t],0,8,t);E=r}if(e.hasOwnProperty(t="EXPONENTIAL_AT"))if(isArray(r=e[t])){intCheck(r[0],-d,0,t);intCheck(r[1],0,d,t);A=r[0];P=r[1]}else{intCheck(r,-d,d,t);A=-(P=r<0?-r:r)}if(e.hasOwnProperty(t="RANGE"))if(isArray(r=e[t])){intCheck(r[0],-d,-1,t);intCheck(r[1],1,d,t);I=r[0];C=r[1]}else{intCheck(r,-d,d,t);if(!r)throw Error(a+t+" cannot be zero: "+r);I=-(C=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes){U=!r;throw Error(a+"crypto unavailable")}U=r}else U=r}if(e.hasOwnProperty(t="MODULO_MODE")){intCheck(r=e[t],0,9,t);x=r}if(e.hasOwnProperty(t="POW_PRECISION")){intCheck(r=e[t],0,d,t);T=r}if(e.hasOwnProperty(t="FORMAT")){r=e[t];if("object"!=(0,_typeof2["default"])(r))throw Error(a+t+" not an object: "+r);N=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.$|\.|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);M=r}}return{DECIMAL_PLACES:S,ROUNDING_MODE:E,EXPONENTIAL_AT:[A,P],RANGE:[I,C],CRYPTO:U,MODULO_MODE:x,POW_PRECISION:T,FORMAT:N,ALPHABET:M}};BigNumber.isBigNumber=function(e){return e instanceof BigNumber||e&&!0===e._isBigNumber||!1};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,b.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,b.gt)};BigNumber.random=(p=9007199254740992*Math.random()&2097151?function(){return i(9007199254740992*Math.random())}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,o,s,l,f=0,h=[],y=new BigNumber(k);null==e?e=S:intCheck(e,0,d);s=n(e/u);if(U)if(crypto.getRandomValues){t=crypto.getRandomValues(new Uint32Array(s*=2));for(;f<s;)if((l=131072*t[f]+(t[f+1]>>>11))>=9e15){r=crypto.getRandomValues(new Uint32Array(2));t[f]=r[0];t[f+1]=r[1]}else{h.push(l%1e14);f+=2}f=s/2}else{if(!crypto.randomBytes){U=!1;throw Error(a+"crypto unavailable")}t=crypto.randomBytes(s*=7);for(;f<s;)if((l=281474976710656*(31&t[f])+1099511627776*t[f+1]+4294967296*t[f+2]+16777216*t[f+3]+(t[f+4]<<16)+(t[f+5]<<8)+t[f+6])>=9e15)crypto.randomBytes(7).copy(t,f);else{h.push(l%1e14);f+=7}f=s/7}if(!U)for(;f<s;)(l=p())<9e15&&(h[f++]=l%1e14);s=h[--f];e%=u;if(s&&e){l=c[u-e];h[f]=i(s/l)*l}for(;0===h[f];h.pop(),f--);if(f<0)h=[o=0];else{for(o=-1;0===h[0];h.splice(0,1),o-=u);for(f=1,l=h[0];l>=10;l/=10,f++);f<u&&(o-=u-f)}y.e=o;y.c=h;return y});h=function(){function toBaseOut(e,t,r,n){for(var i,a,o=[0],s=0,u=e.length;s<u;){for(a=o.length;a--;o[a]*=t);o[0]+=n.indexOf(e.charAt(s++));for(i=0;i<o.length;i++)if(o[i]>r-1){null==o[i+1]&&(o[i+1]=0);o[i+1]+=o[i]/r|0;o[i]%=r}}return o.reverse()}return function(e,r,n,i,a){var o,s,u,l,c,f,d,h,y=e.indexOf("."),p=S,_=E;if(y>=0){l=T;T=0;e=e.replace(".","");f=(h=new BigNumber(r)).pow(e.length-y);T=l;h.c=toBaseOut(toFixedPoint(coeffToString(f.c),f.e,"0"),10,n,"0123456789");h.e=h.c.length}u=l=(d=toBaseOut(e,r,n,a?(o=M,"0123456789"):(o="0123456789",M))).length;for(;0==d[--l];d.pop());if(!d[0])return o.charAt(0);if(y<0)--u;else{f.c=d;f.e=u;f.s=i;d=(f=t(f,h,p,_,n)).c;c=f.r;u=f.e}y=d[s=u+p+1];l=n/2;c=c||s<0||null!=d[s+1];c=_<4?(null!=y||c)&&(0==_||_==(f.s<0?3:2)):y>l||y==l&&(4==_||c||6==_&&1&d[s-1]||_==(f.s<0?8:7));if(s<1||!d[0])e=c?toFixedPoint(o.charAt(1),-p,o.charAt(0)):o.charAt(0);else{d.length=s;if(c)for(--n;++d[--s]>n;){d[s]=0;if(!s){++u;d=[1].concat(d)}}for(l=d.length;!d[--l];);for(y=0,e="";y<=l;e+=o.charAt(d[y++]));e=toFixedPoint(e,u,o.charAt(0))}return e}}();t=function(){function multiply(e,t,r){var n,i,a,o,s=0,u=e.length,l=t%f,c=t/f|0;for(e=e.slice();u--;){s=((i=l*(a=e[u]%f)+(n=c*a+(o=e[u]/f|0)*l)%f*f+s)/r|0)+(n/f|0)+c*o;e[u]=i%r}s&&(e=[s].concat(e));return e}function compare(e,t,r,n){var i,a;if(r!=n)a=r>n?1:-1;else for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function subtract(e,t,r,n){for(var i=0;r--;){e[r]-=i;i=e[r]<t[r]?1:0;e[r]=i*n+e[r]-t[r]}for(;!e[0]&&e.length>1;e.splice(0,1));}return function(e,t,r,n,a){var o,l,c,f,d,h,y,p,_,g,m,v,w,b,k,S,E,A=e.s==t.s?1:-1,P=e.c,I=t.c;if(!(P&&P[0]&&I&&I[0]))return new BigNumber(e.s&&t.s&&(P?!I||P[0]!=I[0]:I)?P&&0==P[0]||!I?0*A:A/0:NaN);_=(p=new BigNumber(A)).c=[];A=r+(l=e.e-t.e)+1;if(!a){a=s;l=bitFloor(e.e/u)-bitFloor(t.e/u);A=A/u|0}for(c=0;I[c]==(P[c]||0);c++);I[c]>(P[c]||0)&&l--;if(A<0){_.push(1);f=!0}else{b=P.length;S=I.length;c=0;A+=2;if((d=i(a/(I[0]+1)))>1){I=multiply(I,d,a);P=multiply(P,d,a);S=I.length;b=P.length}w=S;m=(g=P.slice(0,S)).length;for(;m<S;g[m++]=0);E=I.slice();E=[0].concat(E);k=I[0];I[1]>=a/2&&k++;do{d=0;if((o=compare(I,g,S,m))<0){v=g[0];S!=m&&(v=v*a+(g[1]||0));if((d=i(v/k))>1){d>=a&&(d=a-1);y=(h=multiply(I,d,a)).length;m=g.length;for(;1==compare(h,g,y,m);){d--;subtract(h,S<y?E:I,y,a);y=h.length;o=1}}else{0==d&&(o=d=1);y=(h=I.slice()).length}y<m&&(h=[0].concat(h));subtract(g,h,m,a);m=g.length;if(-1==o)for(;compare(I,g,S,m)<1;){d++;subtract(g,S<m?E:I,m,a);m=g.length}}else if(0===o){d++;g=[0]}_[c++]=d;if(g[0])g[m++]=P[w]||0;else{g=[P[w]];m=1}}while((w++<b||null!=g[0])&&A--);f=null!=g[0];_[0]||_.splice(0,1)}if(a==s){for(c=1,A=_[0];A>=10;A/=10,c++);round(p,r+(p.e=c+l*u-1)+1,n,f)}else{p.e=l;p.r=+f}return p}}();function format(e,t,r,n){var i,a,o,s,u;null==r?r=E:intCheck(r,0,8);if(!e.c)return e.toString();i=e.c[0];o=e.e;if(null==t){u=coeffToString(e.c);u=1==n||2==n&&o<=A?toExponential(u,o):toFixedPoint(u,o,"0")}else{a=(e=round(new BigNumber(e),t,r)).e;s=(u=coeffToString(e.c)).length;if(1==n||2==n&&(t<=a||a<=A)){for(;s<t;u+="0",s++);u=toExponential(u,a)}else{t-=o;u=toFixedPoint(u,a,"0");if(a+1>s){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=a-s)>0){a+1==s&&(u+=".");for(;t--;u+="0");}}}return e.s<0&&i?"-"+u:u}function maxOrMin(e,t){var r,n,i=0;isArray(e[0])&&(e=e[0]);r=new BigNumber(e[0]);for(;++i<e.length;){if(!(n=new BigNumber(e[i])).s){r=n;break}t.call(r,n)&&(r=n)}return r}function normalise(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);if((r=n+r*u-1)>C)e.c=e.e=null;else if(r<I)e.c=[e.e=0];else{e.e=r;e.c=t}return e}y=(_=/^(-?)0([xbo])(?=\w[\w.]*$)/i,g=/^([^.]+)\.$/,m=/^\.([^.]+)$/,v=/^-?(Infinity|NaN)$/,w=/^\s*\+(?=[\w.])|^\s+|\s+$/g,function(e,t,r,n){var i,o=r?t:t.replace(w,"");if(v.test(o)){e.s=isNaN(o)?null:o<0?-1:1;e.c=e.e=null}else{if(!r){o=o.replace(_,function(e,t,r){i="x"==(r=r.toLowerCase())?16:"b"==r?2:8;return n&&n!=i?e:t});if(n){i=n;o=o.replace(g,"$1").replace(m,"0.$1")}if(t!=o)return new BigNumber(o,i)}if(BigNumber.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.c=e.e=e.s=null}});function round(e,t,r,a){var o,l,f,d,h,y,p,_=e.c,g=c;if(_){e:{for(o=1,d=_[0];d>=10;d/=10,o++);if((l=t-o)<0){l+=u;f=t;p=(h=_[y=0])/g[o-f-1]%10|0}else if((y=n((l+1)/u))>=_.length){if(!a)break e;for(;_.length<=y;_.push(0));h=p=0;o=1;f=(l%=u)-u+1}else{h=d=_[y];for(o=1;d>=10;d/=10,o++);p=(f=(l%=u)-u+o)<0?0:h/g[o-f-1]%10|0}a=a||t<0||null!=_[y+1]||(f<0?h:h%g[o-f-1]);a=r<4?(p||a)&&(0==r||r==(e.s<0?3:2)):p>5||5==p&&(4==r||a||6==r&&(l>0?f>0?h/g[o-f]:0:_[y-1])%10&1||r==(e.s<0?8:7));if(t<1||!_[0]){_.length=0;if(a){t-=e.e+1;_[0]=g[(u-t%u)%u];e.e=-t||0}else _[0]=e.e=0;return e}if(0==l){_.length=y;d=1;y--}else{_.length=y+1;d=g[u-l];_[y]=f>0?i(h/g[o-f]%g[f])*d:0}if(a)for(;;){if(0==y){for(l=1,f=_[0];f>=10;f/=10,l++);f=_[0]+=d;for(d=1;f>=10;f/=10,d++);if(l!=d){e.e++;_[0]==s&&(_[0]=1)}break}_[y]+=d;if(_[y]!=s)break;_[y--]=0;d=1}for(l=_.length;0===_[--l];_.pop());}e.e>C?e.c=e.e=null:e.e<I&&(e.c=[e.e=0])}return e}b.absoluteValue=b.abs=function(){var e=new BigNumber(this);e.s<0&&(e.s=1);return e};b.comparedTo=function(e,t){return compare(this,new BigNumber(e,t))};b.decimalPlaces=b.dp=function(e,t){var r,n,i,a=this;if(null!=e){intCheck(e,0,d);null==t?t=E:intCheck(t,0,8);return round(new BigNumber(a),e+a.e+1,t)}if(!(r=a.c))return null;n=((i=r.length-1)-bitFloor(this.e/u))*u;if(i=r[i])for(;i%10==0;i/=10,n--);n<0&&(n=0);return n};b.dividedBy=b.div=function(e,r){return t(this,new BigNumber(e,r),S,E)};b.dividedToIntegerBy=b.idiv=function(e,r){return t(this,new BigNumber(e,r),0,1)};b.exponentiatedBy=b.pow=function(e,t){var r,o,s,l,c,f,d,h=this;if((e=new BigNumber(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+e);null!=t&&(t=new BigNumber(t));l=e.e>14;if(!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0]){d=new BigNumber(Math.pow(+h.valueOf(),l?2-isOdd(e):+e));return t?d.mod(t):d}c=e.s<0;if(t){if(t.c?!t.c[0]:!t.s)return new BigNumber(NaN);(o=!c&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||l&&h.c[1]>=24e7:h.c[0]<8e13||l&&h.c[0]<=9999975e7))){s=h.s<0&&isOdd(e)?-0:0;h.e>-1&&(s=1/s);return new BigNumber(c?1/s:s)}T&&(s=n(T/u+2))}if(l){r=new BigNumber(.5);f=isOdd(e)}else f=e%2;c&&(e.s=1);d=new BigNumber(k);for(;;){if(f){if(!(d=d.times(h)).c)break;s?d.c.length>s&&(d.c.length=s):o&&(d=d.mod(t))}if(l){round(e=e.times(r),e.e+1,1);if(!e.c[0])break;l=e.e>14;f=isOdd(e)}else{if(!(e=i(e/2)))break;f=e%2}h=h.times(h);s?h.c&&h.c.length>s&&(h.c.length=s):o&&(h=h.mod(t))}if(o)return d;c&&(d=k.div(d));return t?d.mod(t):s?round(d,T,E,void 0):d};b.integerValue=function(e){var t=new BigNumber(this);null==e?e=E:intCheck(e,0,8);return round(t,t.e+1,e)};b.isEqualTo=b.eq=b.equals=function(e,t){return 0===compare(this,new BigNumber(e,t))};b.isFinite=function(){return!!this.c};b.isGreaterThan=b.gt=function(e,t){return compare(this,new BigNumber(e,t))>0};b.isGreaterThanOrEqualTo=b.gte=function(e,t){return 1===(t=compare(this,new BigNumber(e,t)))||0===t};b.isInteger=function(){return!!this.c&&bitFloor(this.e/u)>this.c.length-2};b.isLessThan=b.lt=function(e,t){return compare(this,new BigNumber(e,t))<0};b.isLessThanOrEqualTo=b.lte=function(e,t){return-1===(t=compare(this,new BigNumber(e,t)))||0===t};b.isNaN=function(){return!this.s};b.isNegative=function(){return this.s<0};b.isPositive=function(){return this.s>0};b.isZero=function(){return!!this.c&&0==this.c[0]};b.minus=function(e,t){var r,n,i,a,o=this,l=o.s;t=(e=new BigNumber(e,t)).s;if(!l||!t)return new BigNumber(NaN);if(l!=t){e.s=-t;return o.plus(e)}var c=o.e/u,f=e.e/u,d=o.c,h=e.c;if(!c||!f){if(!d||!h)return d?(e.s=-t,e):new BigNumber(h?o:NaN);if(!d[0]||!h[0])return h[0]?(e.s=-t,e):new BigNumber(d[0]?o:3==E?-0:0)}c=bitFloor(c);f=bitFloor(f);d=d.slice();if(l=c-f){if(a=l<0){l=-l;i=d}else{f=c;i=h}i.reverse();for(t=l;t--;i.push(0));i.reverse()}else{n=(a=(l=d.length)<(t=h.length))?l:t;for(l=t=0;t<n;t++)if(d[t]!=h[t]){a=d[t]<h[t];break}}a&&(i=d,d=h,h=i,e.s=-e.s);if((t=(n=h.length)-(r=d.length))>0)for(;t--;d[r++]=0);t=s-1;for(;n>l;){if(d[--n]<h[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r];d[n]+=s}d[n]-=h[n]}for(;0==d[0];d.splice(0,1),--f);if(!d[0]){e.s=3==E?-1:1;e.c=[e.e=0];return e}return normalise(e,d,f)};b.modulo=b.mod=function(e,r){var n,i,a=this;e=new BigNumber(e,r);if(!a.c||!e.s||e.c&&!e.c[0])return new BigNumber(NaN);if(!e.c||a.c&&!a.c[0])return new BigNumber(a);if(9==x){i=e.s;e.s=1;n=t(a,e,0,3);e.s=i;n.s*=i}else n=t(a,e,0,x);(e=a.minus(n.times(e))).c[0]||1!=x||(e.s=a.s);return e};b.multipliedBy=b.times=function(e,t){var r,n,i,a,o,l,c,d,h,y,p,_,g,m,v,w=this,b=w.c,k=(e=new BigNumber(e,t)).c;if(!(b&&k&&b[0]&&k[0])){if(!w.s||!e.s||b&&!b[0]&&!k||k&&!k[0]&&!b)e.c=e.e=e.s=null;else{e.s*=w.s;if(b&&k){e.c=[0];e.e=0}else e.c=e.e=null}return e}n=bitFloor(w.e/u)+bitFloor(e.e/u);e.s*=w.s;(c=b.length)<(y=k.length)&&(g=b,b=k,k=g,i=c,c=y,y=i);for(i=c+y,g=[];i--;g.push(0));m=s;v=f;for(i=y;--i>=0;){r=0;p=k[i]%v;_=k[i]/v|0;for(a=i+(o=c);a>i;){r=((d=p*(d=b[--o]%v)+(l=_*d+(h=b[o]/v|0)*p)%v*v+g[a]+r)/m|0)+(l/v|0)+_*h;g[a--]=d%m}g[a]=r}r?++n:g.splice(0,1);return normalise(e,g,n)};b.negated=function(){var e=new BigNumber(this);e.s=-e.s||null;return e};b.plus=function(e,t){var r,n=this,i=n.s;t=(e=new BigNumber(e,t)).s;if(!i||!t)return new BigNumber(NaN);if(i!=t){e.s=-t;return n.minus(e)}var a=n.e/u,o=e.e/u,l=n.c,c=e.c;if(!a||!o){if(!l||!c)return new BigNumber(i/0);if(!l[0]||!c[0])return c[0]?e:new BigNumber(l[0]?n:0*i)}a=bitFloor(a);o=bitFloor(o);l=l.slice();if(i=a-o){if(i>0){o=a;r=c}else{i=-i;r=l}r.reverse();for(;i--;r.push(0));r.reverse()}(i=l.length)-(t=c.length)<0&&(r=c,c=l,l=r,t=i);for(i=0;t;){i=(l[--t]=l[t]+c[t]+i)/s|0;l[t]=s===l[t]?0:l[t]%s}if(i){l=[i].concat(l);++o}return normalise(e,l,o)};b.precision=b.sd=function(e,t){var r,n,i,a=this;if(null!=e&&e!==!!e){intCheck(e,1,d);null==t?t=E:intCheck(t,0,8);return round(new BigNumber(a),e,t)}if(!(r=a.c))return null;n=(i=r.length-1)*u+1;if(i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}e&&a.e+1>n&&(n=a.e+1);return n};b.shiftedBy=function(e){intCheck(e,-l,l);return this.times("1e"+e)};b.squareRoot=b.sqrt=function(){var e,r,n,i,a,o=this,s=o.c,u=o.s,l=o.e,c=S+4,f=new BigNumber("0.5");if(1!==u||!s||!s[0])return new BigNumber(!u||u<0&&(!s||s[0])?NaN:s?o:1/0);if(0==(u=Math.sqrt(+o))||u==1/0){((r=coeffToString(s)).length+l)%2==0&&(r+="0");u=Math.sqrt(r);l=bitFloor((l+1)/2)-(l<0||l%2);n=new BigNumber(r=u==1/0?"1e"+l:(r=u.toExponential()).slice(0,r.indexOf("e")+1)+l)}else n=new BigNumber(u+"");if(n.c[0]){(u=(l=n.e)+c)<3&&(u=0);for(;;){a=n;n=f.times(a.plus(t(o,a,c,1)));if(coeffToString(a.c).slice(0,u)===(r=coeffToString(n.c)).slice(0,u)){n.e<l&&--u;if("9999"!=(r=r.slice(u-3,u+1))&&(i||"4999"!=r)){if(!+r||!+r.slice(1)&&"5"==r.charAt(0)){round(n,n.e+S+2,1);e=!n.times(n).eq(o)}break}if(!i){round(a,a.e+S+2,0);if(a.times(a).eq(o)){n=a;break}}c+=4;u+=4;i=1}}}return round(n,n.e+S+1,E,e)};b.toExponential=function(e,t){if(null!=e){intCheck(e,0,d);e++}return format(this,e,t,1)};b.toFixed=function(e,t){if(null!=e){intCheck(e,0,d);e=e+this.e+1}return format(this,e,t)};b.toFormat=function(e,t){var r=this.toFixed(e,t);if(this.c){var n,i=r.split("."),a=+N.groupSize,o=+N.secondaryGroupSize,s=N.groupSeparator,u=i[0],l=i[1],c=this.s<0,f=c?u.slice(1):u,d=f.length;o&&(n=a,a=o,o=n,d-=n);if(a>0&&d>0){n=d%a||a;u=f.substr(0,n);for(;n<d;n+=a)u+=s+f.substr(n,a);o>0&&(u+=s+f.slice(n));c&&(u="-"+u)}r=l?u+N.decimalSeparator+((o=+N.fractionGroupSize)?l.replace(new RegExp("\\d{"+o+"}\\B","g"),"$&"+N.fractionGroupSeparator):l):u}return r};b.toFraction=function(e){var r,n,i,o,s,l,f,d,h,y,p,_,g=this,m=g.c;if(null!=e&&(!(d=new BigNumber(e)).isInteger()&&(d.c||1!==d.s)||d.lt(k)))throw Error(a+"Argument "+(d.isInteger()?"out of range: ":"not an integer: ")+e);if(!m)return g.toString();n=new BigNumber(k);y=i=new BigNumber(k);o=h=new BigNumber(k);_=coeffToString(m);l=n.e=_.length-g.e-1;n.c[0]=c[(f=l%u)<0?u+f:f];e=!e||d.comparedTo(n)>0?l>0?n:y:d;f=C;C=1/0;d=new BigNumber(_);h.c[0]=0;for(;;){p=t(d,n,0,1);if(1==(s=i.plus(p.times(o))).comparedTo(e))break;i=o;o=s;y=h.plus(p.times(s=y));h=s;n=d.minus(p.times(s=n));d=s}s=t(e.minus(i),o,0,1);h=h.plus(s.times(y));i=i.plus(s.times(o));h.s=y.s=g.s;r=t(y,o,l*=2,E).minus(g).abs().comparedTo(t(h,i,l,E).minus(g).abs())<1?[y.toString(),o.toString()]:[h.toString(),i.toString()];C=f;return r};b.toNumber=function(){return+this};b.toPrecision=function(e,t){null!=e&&intCheck(e,1,d);return format(this,e,t,2)};b.toString=function(e){var t,r=this,n=r.s,i=r.e;if(null===i)if(n){t="Infinity";n<0&&(t="-"+t)}else t="NaN";else{t=coeffToString(r.c);if(null==e)t=i<=A||i>=P?toExponential(t,i):toFixedPoint(t,i,"0");else{intCheck(e,2,M.length,"Base");t=h(toFixedPoint(t,i,"0"),10,e,n,!0)}n<0&&r.c[0]&&(t="-"+t)}return t};b.valueOf=b.toJSON=function(){var e,t=this,r=t.e;if(null===r)return t.toString();e=coeffToString(t.c);e=r<=A||r>=P?toExponential(e,r):toFixedPoint(e,r,"0");return t.s<0?"-"+e:e};b._isBigNumber=!0;null!=e&&BigNumber.set(e);return BigNumber}())["default"]=t.BigNumber=t;e.BigNumber=t}(r.scope);var _=r.scope.BigNumber;_.config({DECIMAL_PLACES:10});var g=function(){function NumberUtils(){(0,_classCallCheck2["default"])(this,NumberUtils)}(0,_createClass2["default"])(NumberUtils,null,[{key:"isUint8",value:function isUint8(e){return(0,_isInteger["default"])(e)&&e>=0&&e<=NumberUtils.UINT8_MAX}},{key:"isUint16",value:function isUint16(e){return(0,_isInteger["default"])(e)&&e>=0&&e<=NumberUtils.UINT16_MAX}},{key:"isUint32",value:function isUint32(e){return(0,_isInteger["default"])(e)&&e>=0&&e<=NumberUtils.UINT32_MAX}},{key:"isUint64",value:function isUint64(e){return(0,_isInteger["default"])(e)&&e>=0&&e<=NumberUtils.UINT64_MAX}},{key:"randomUint32",value:function randomUint32(){return Math.floor(Math.random()*(NumberUtils.UINT32_MAX+1))}},{key:"randomUint64",value:function randomUint64(){return Math.floor(Math.random()*(NumberUtils.UINT64_MAX+1))}},{key:"fromBinary",value:function fromBinary(e){return(0,_parseInt2["default"])(e,2)}}]);return NumberUtils}();g.UINT8_MAX=255;g.UINT16_MAX=65535;g.UINT32_MAX=4294967295;g.UINT64_MAX=_maxSafeInteger["default"];r.register(g);var m=function(){function MerklePath(e){(0,_classCallCheck2["default"])(this,MerklePath);if(!(0,_isArray["default"])(e)||!g.isUint8(e.length)||e.some(function(e){return!(e instanceof v)}))throw new Error("Malformed nodes");this._nodes=e}(0,_createClass2["default"])(MerklePath,[{key:"computeRoot",value:function computeRoot(e){var t=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:MerkleTree._hash)(e),r=!0,n=!1,i=undefined;try{for(var a,o=(0,_getIterator2["default"])(this._nodes);!(r=(a=o.next()).done);r=!0){var s=a.value,u=s.left,l=s.hash,c=new y(2*l.serializedSize);u&&l.serialize(c);t.serialize(c);u||l.serialize(c);t=E.light(c)}}catch(f){n=!0;i=f}finally{try{r||null==o["return"]||o["return"]()}finally{if(n)throw i}}return t}},{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).writeUint8(this._nodes.length);e.write(MerklePath._compress(this._nodes));var t=!0,r=!1,n=undefined;try{for(var i,a=(0,_getIterator2["default"])(this._nodes);!(t=(i=a.next()).done);t=!0){i.value.hash.serialize(e)}}catch(o){r=!0;n=o}finally{try{t||null==a["return"]||a["return"]()}finally{if(r)throw n}}return e}},{key:"equals",value:function equals(e){return e instanceof MerklePath&&this._nodes.length===e._nodes.length&&this._nodes.every(function(t,r){return t.equals(e._nodes[r])})}},{key:"serializedSize",get:function get(){return 1+Math.ceil(this._nodes.length/8)+this._nodes.reduce(function(e,t){return e+t.hash.serializedSize},0)}},{key:"nodes",get:function get(){return this._nodes}}],[{key:"compute",value:function compute(e,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:MerkleTree._hash,n=r(t),i=[];MerklePath._compute(e,n,i,r);return new MerklePath(i)}},{key:"_compute",value:function _compute(e,t,r,n){var i,a=e.length;if(0===a)return{containsLeaf:!1,inner:i=E.light(new Uint8Array(0))};if(1===a)return{containsLeaf:(i=n(e[0])).equals(t),inner:i};var o=Math.round(a/2),s=e.slice(0,o),u=e.slice(o),l=MerklePath._compute(s,t,r,n),c=l.containsLeaf,d=l.inner,h=MerklePath._compute(u,t,r,n),y=h.containsLeaf,p=h.inner;i=E.light(f.concatTypedArrays(d.serialize(),p.serialize()));if(c){r.push(new v(p,!1));return{containsLeaf:!0,inner:i}}if(y){r.push(new v(d,!0));return{containsLeaf:!0,inner:i}}return{containsLeaf:!1,inner:i}}},{key:"_compress",value:function _compress(e){for(var t=e.length,r=Math.ceil(t/8),n=new Uint8Array(r),i=0;i<t;i++)e[i].left&&(n[Math.floor(i/8)]|=128>>>i%8);return n}},{key:"unserialize",value:function unserialize(e){for(var t=e.readUint8(),r=Math.ceil(t/8),n=e.read(r),i=[],a=0;a<t;a++){var o=0!=(n[Math.floor(a/8)]&128>>>a%8),s=E.unserialize(e);i.push(new v(s,o))}return new MerklePath(i)}}]);return MerklePath}();r.register(m);var v=function(){function MerklePathNode(e,t){(0,_classCallCheck2["default"])(this,MerklePathNode);this._hash=e;this._left=t}(0,_createClass2["default"])(MerklePathNode,[{key:"equals",value:function equals(e){return e instanceof MerklePathNode&&this._hash.equals(e.hash)&&this._left===e.left}},{key:"hash",get:function get(){return this._hash}},{key:"left",get:function get(){return this._left}}]);return MerklePathNode}();r.register(v);var w=function(){function MnemonicUtils(){(0,_classCallCheck2["default"])(this,MnemonicUtils)}(0,_createClass2["default"])(MnemonicUtils,null,[{key:"_crcChecksum",value:function _crcChecksum(e){var t=8*e.length/32,r=p.compute(e);return f.toBinary([r]).slice(0,t)}},{key:"_sha256Checksum",value:function _sha256Checksum(e){var t=8*e.length/32,r=E.computeSha256(e);return f.toBinary(r).slice(0,t)}},{key:"_entropyToBits",value:function _entropyToBits(e){if(e.length<16)throw new Error("Invalid key, length < 16");if(e.length>32)throw new Error("Invalid key, length > 32");if(e.length%4!=0)throw new Error("Invalid key, length % 4 != 0");return f.toBinary(e)}},{key:"_normalizeEntropy",value:function _normalizeEntropy(e){"string"==typeof e&&(e=f.fromHex(e));e instanceof U&&(e=e.serialize());e instanceof ArrayBuffer&&(e=new Uint8Array(e));return e}},{key:"_bitsToMnemonic",value:function _bitsToMnemonic(e,t){return e.match(/(.{11})/g).map(function(e){var r=g.fromBinary(e);return t[r]})}},{key:"_mnemonicToBits",value:function _mnemonicToBits(e,t){var r=e;if(r.length<12)throw new Error("Invalid mnemonic, less than 12 words");if(r.length>24)throw new Error("Invalid mnemonic, more than 24 words");if(r.length%3!=0)throw new Error("Invalid mnemonic, words % 3 != 0");return r.map(function(e){var r=t.indexOf(e.toLowerCase());if(-1===r)throw new Error("Invalid mnemonic, word >".concat(e,"< is not in wordlist"));return b.lpad(r.toString(2),"0",11)}).join("")}},{key:"_bitsToEntropy",value:function _bitsToEntropy(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=e.length-(e.length%8||8),n=e.slice(0,r),i=e.slice(r),a=n.match(/(.{8})/g).map(g.fromBinary);if(a.length<16)throw new Error("Invalid generated key, length < 16");if(a.length>32)throw new Error("Invalid generated key, length > 32");if(a.length%4!=0)throw new Error("Invalid generated key, length % 4 != 0");var o=new Uint8Array(a);if((t?MnemonicUtils._crcChecksum(o):MnemonicUtils._sha256Checksum(o))!==i)throw new Error("Invalid checksum");return o}},{key:"entropyToMnemonic",value:function entropyToMnemonic(e,t){t=t||MnemonicUtils.DEFAULT_WORDLIST;e=MnemonicUtils._normalizeEntropy(e);var r=MnemonicUtils._entropyToBits(e)+MnemonicUtils._sha256Checksum(e);return MnemonicUtils._bitsToMnemonic(r,t)}},{key:"entropyToLegacyMnemonic",value:function entropyToLegacyMnemonic(e,t){t=t||MnemonicUtils.DEFAULT_WORDLIST;e=MnemonicUtils._normalizeEntropy(e);var r=MnemonicUtils._entropyToBits(e)+MnemonicUtils._crcChecksum(e);return MnemonicUtils._bitsToMnemonic(r,t)}},{key:"mnemonicToEntropy",value:function mnemonicToEntropy(e,t){(0,_isArray["default"])(e)||(e=e.trim().split(/\s+/g));t=t||MnemonicUtils.DEFAULT_WORDLIST;var r=MnemonicUtils._mnemonicToBits(e,t);return new U(MnemonicUtils._bitsToEntropy(r,!1))}},{key:"legacyMnemonicToEntropy",value:function legacyMnemonicToEntropy(e,t){(0,_isArray["default"])(e)||(e=e.trim().split(/\s+/g));t=t||MnemonicUtils.DEFAULT_WORDLIST;var r=MnemonicUtils._mnemonicToBits(e,t);return new U(MnemonicUtils._bitsToEntropy(r,!0))}},{key:"_salt",value:function _salt(e){return"mnemonic".concat(e||"")}},{key:"mnemonicToSeed",value:function mnemonicToSeed(e,t){(0,_isArray["default"])(e)&&(e=e.join(" "));var r=f.fromAscii(e),n=f.fromAscii(MnemonicUtils._salt(t));return q.computePBKDF2sha512(r,n,2048,64)}},{key:"mnemonicToExtendedPrivateKey",value:function mnemonicToExtendedPrivateKey(e,t){var r=MnemonicUtils.mnemonicToSeed(e,t);return x.generateMasterKey(r)}},{key:"isCollidingChecksum",value:function isCollidingChecksum(e){var t=MnemonicUtils._normalizeEntropy(e);return MnemonicUtils._crcChecksum(t)===MnemonicUtils._sha256Checksum(t)}},{key:"getMnemonicType",value:function getMnemonicType(e,t){(0,_isArray["default"])(e)||(e=e.trim().split(/\s+/g));t=t||MnemonicUtils.DEFAULT_WORDLIST;var r=MnemonicUtils._mnemonicToBits(e,t),n=!0;try{MnemonicUtils._bitsToEntropy(r,!1)}catch(a){n=!1}var i=!0;try{MnemonicUtils._bitsToEntropy(r,!0)}catch(a){i=!1}if(n&&i)return MnemonicUtils.MnemonicType.UNKNOWN;if(!n&&!i)throw new Error("Invalid checksum");return n?MnemonicUtils.MnemonicType.BIP39:MnemonicUtils.MnemonicType.LEGACY}}]);return MnemonicUtils}();w.ENGLISH_WORDLIST=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];w.DEFAULT_WORDLIST=w.ENGLISH_WORDLIST;w.MnemonicType={UNKNOWN:-1,LEGACY:0,BIP39:1};(0,_freeze["default"])(w);r.register(w);var b=function(){function StringUtils(){(0,_classCallCheck2["default"])(this,StringUtils)}(0,_createClass2["default"])(StringUtils,null,[{key:"isMultibyte",value:function isMultibyte(e){return/[\uD800-\uDFFF]/.test(e)}},{key:"isHex",value:function isHex(e){return/^[0-9A-Fa-f]*$/.test(e)}},{key:"isHexBytes",value:function isHexBytes(e,t){return!!StringUtils.isHex(e)&&(e.length%2==0&&("number"!=typeof t||e.length/2===t))}},{key:"commonPrefix",value:function commonPrefix(e,t){for(var r=0;r<e.length&&e[r]===t[r];++r);return e.substr(0,r)}},{key:"lpad",value:function lpad(e,t,r){for(;e.length<r;)e=t+e;return e}}]);return StringUtils}();r.register(b);var k=function(){function Policy(){(0,_classCallCheck2["default"])(this,Policy)}(0,_createClass2["default"])(Policy,null,[{key:"coinsToLunas",value:function coinsToLunas(e){return Math.round(e*Policy.LUNAS_PER_COIN)}},{key:"lunasToCoins",value:function lunasToCoins(e){return e/Policy.LUNAS_PER_COIN}},{key:"coinsToSatoshis",value:function coinsToSatoshis(e){return Policy.coinsToLunas(e)}},{key:"satoshisToCoins",value:function satoshisToCoins(e){return Policy.lunasToCoins(e)}},{key:"supplyAfter",value:function supplyAfter(e){for(var t=Math.floor(e/Policy._supplyCacheInterval)*Policy._supplyCacheInterval,r=(t=Math.max(0,Math.min(t,Policy._supplyCacheMax)))/Policy._supplyCacheInterval,n=Math.floor(e/Policy._supplyCacheInterval),i=0===t?Policy.INITIAL_SUPPLY:Policy._supplyCache.get(t),a=r;a<n;++a){t=a*Policy._supplyCacheInterval;var o=(a+1)*Policy._supplyCacheInterval-1;i=Policy._supplyAfter(i,o,t);Policy._supplyCache.set(o+1,i);Policy._supplyCacheMax=o+1}return Policy._supplyAfter(i,e,n*Policy._supplyCacheInterval)}},{key:"_supplyAfter",value:function _supplyAfter(e,t){for(var r=e,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;n<=t;++n)r+=Policy._blockRewardAt(r,n);return r}},{key:"blockRewardAt",value:function blockRewardAt(e){var t=Policy.supplyAfter(e-1);return Policy._blockRewardAt(t,e)}},{key:"_blockRewardAt",value:function _blockRewardAt(e,t){if(t<=0)return 0;var r=Policy.TOTAL_SUPPLY-e;return t>=Policy.EMISSION_TAIL_START&&r>=Policy.EMISSION_TAIL_REWARD?Policy.EMISSION_TAIL_REWARD:(r-r%Policy.EMISSION_SPEED)/Policy.EMISSION_SPEED}},{key:"SATOSHIS_PER_COIN",get:function get(){return Policy.LUNAS_PER_COIN}}]);return Policy}();k.BLOCK_TIME=60;k.BLOCK_SIZE_MAX=1e5;k.BLOCK_TARGET_MAX=new _(2).pow(240);k.DIFFICULTY_BLOCK_WINDOW=120;k.DIFFICULTY_MAX_ADJUSTMENT_FACTOR=2;k.TRANSACTION_VALIDITY_WINDOW=120;k.LUNAS_PER_COIN=1e5;k.TOTAL_SUPPLY=21e14;k.INITIAL_SUPPLY=252e12;k.EMISSION_SPEED=Math.pow(2,22);k.EMISSION_TAIL_START=48692960;k.EMISSION_TAIL_REWARD=4e3;k.M=240;k.K=120;k.DELTA=.15;k.NUM_BLOCKS_VERIFICATION=250;k.NUM_SNAPSHOTS_MAX=20;k._supplyCache=new _map["default"];k._supplyCacheMax=0;k._supplyCacheInterval=5e3;r.register(k);var S=function(){function Serializable(){(0,_classCallCheck2["default"])(this,Serializable)}(0,_createClass2["default"])(Serializable,[{key:"equals",value:function equals(e){return e instanceof Serializable&&f.equals(this.serialize(),e.serialize())}},{key:"compare",value:function compare(e){return f.compare(this.serialize(),e.serialize())}},{key:"hashCode",value:function hashCode(){return this.toBase64()}},{key:"serialize",value:function serialize(e){}},{key:"toString",value:function toString(){return this.toBase64()}},{key:"toBase64",value:function toBase64(){return f.toBase64(this.serialize())}},{key:"toHex",value:function toHex(){return f.toHex(this.serialize())}}]);return Serializable}();r.register(S);var E=function(e){(0,_inherits2["default"])(Hash,e);function Hash(e){var t,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Hash.Algorithm.BLAKE2B;(0,_classCallCheck2["default"])(this,Hash);if(null===e)e=new Uint8Array(Hash.getSize(r));else{if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Hash.getSize(r))throw new Error("Primitive: Invalid length")}(t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Hash).call(this)))._obj=e;t._algorithm=r;return t}(0,_createClass2["default"])(Hash,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"subarray",value:function subarray(e,t){return this._obj.subarray(e,t)}},{key:"equals",value:function equals(e){return e instanceof Hash&&e._algorithm===this._algorithm&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(Hash.prototype),"equals",this).call(this,e)}},{key:"toPlain",value:function toPlain(){return this.toHex()}},{key:"serializedSize",get:function get(){return Hash.SIZE.get(this._algorithm)}},{key:"array",get:function get(){return this._obj}},{key:"algorithm",get:function get(){return this._algorithm}}],[{key:"light",value:function light(e){return Hash.blake2b(e)}},{key:"blake2b",value:function blake2b(e){return new Hash(Hash.computeBlake2b(e),Hash.Algorithm.BLAKE2B)}},{key:"hard",value:function hard(e){return Hash.argon2d(e)}},{key:"argon2d",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee9(e){return _regenerator["default"].wrap(function _callee9$(t){for(;;)switch(t.prev=t.next){case 0:t.t0=Hash;t.next=3;return W.getInstanceAsync();case 3:t.t1=e;t.next=6;return t.sent.computeArgon2d(t.t1);case 6:t.t2=t.sent;t.t3=Hash.Algorithm.ARGON2D;return t.abrupt("return",new t.t0(t.t2,t.t3));case 9:case"end":return t.stop()}},_callee9)}));return function argon2d(t){return e.apply(this,arguments)}}()},{key:"sha256",value:function sha256(e){return new Hash(Hash.computeSha256(e),Hash.Algorithm.SHA256)}},{key:"sha512",value:function sha512(e){return new Hash(Hash.computeSha512(e),Hash.Algorithm.SHA512)}},{key:"compute",value:function compute(e,t){switch(t){case Hash.Algorithm.BLAKE2B:return Hash.blake2b(e);case Hash.Algorithm.SHA256:return Hash.sha256(e);default:throw new Error("Invalid hash algorithm")}}},{key:"unserialize",value:function unserialize(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Hash.Algorithm.BLAKE2B;return new Hash(e.read(Hash.getSize(t)),t)}},{key:"fromAny",value:function fromAny(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Hash.Algorithm.BLAKE2B;if(e instanceof Hash)return e;try{return new Hash(f.fromAny(e,Hash.SIZE.get(t)),t)}catch(r){throw new Error("Invalid hash format")}}},{key:"fromBase64",value:function fromBase64(e){return new Hash(f.fromBase64(e))}},{key:"fromHex",value:function fromHex(e){return new Hash(f.fromHex(e))}},{key:"fromPlain",value:function fromPlain(e){return Hash.fromString(e)}},{key:"fromString",value:function fromString(e){try{return Hash.fromHex(e)}catch(t){}try{return Hash.fromBase64(e)}catch(t){}throw new Error("Invalid hash format")}},{key:"isHash",value:function isHash(e){return e instanceof Hash}},{key:"getSize",value:function getSize(e){var t=Hash.SIZE.get(e);if("number"!=typeof t)throw new Error("Invalid hash algorithm");return t}},{key:"computeBlake2b",value:function computeBlake2b(e){if(s.isNodeJs()){var t=new Uint8Array(Hash.getSize(Hash.Algorithm.BLAKE2B));NodeNative.node_blake2(t,new Uint8Array(e));return t}var r;try{r=Module.stackSave();var n=Hash.getSize(Hash.Algorithm.BLAKE2B),a=Module.stackAlloc(n),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);var u=Module._nimiq_blake2(a,o,e.length);if(0!==u)throw u;var l=new Uint8Array(n);l.set(new Uint8Array(Module.HEAPU8.buffer,a,n));return l}catch(c){i.w(Hash,c);throw c}finally{r!==undefined&&Module.stackRestore(r)}}},{key:"computeSha256",value:function computeSha256(e){if(s.isNodeJs()){var t=new Uint8Array(Hash.getSize(Hash.Algorithm.SHA256));NodeNative.node_sha256(t,new Uint8Array(e));return t}var r;try{r=Module.stackSave();var n=Hash.getSize(Hash.Algorithm.SHA256),a=Module.stackAlloc(n),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);Module._nimiq_sha256(a,o,e.length);var u=new Uint8Array(n);u.set(new Uint8Array(Module.HEAPU8.buffer,a,n));return u}catch(l){i.w(Hash,l);throw l}finally{r!==undefined&&Module.stackRestore(r)}}},{key:"computeSha512",value:function computeSha512(e){if(s.isNodeJs()){var t=new Uint8Array(Hash.getSize(Hash.Algorithm.SHA512));NodeNative.node_sha512(t,new Uint8Array(e));return t}var r;try{r=Module.stackSave();var n=Hash.getSize(Hash.Algorithm.SHA512),a=Module.stackAlloc(n),o=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);Module._nimiq_sha512(a,o,e.length);var u=new Uint8Array(n);u.set(new Uint8Array(Module.HEAPU8.buffer,a,n));return u}catch(l){i.w(Hash,l);throw l}finally{r!==undefined&&Module.stackRestore(r)}}}]);return Hash}(S);E.Algorithm={BLAKE2B:1,ARGON2D:2,SHA256:3,SHA512:4};E.Algorithm.toString=function(e){switch(e){case E.Algorithm.BLAKE2B:return"blake2b";case E.Algorithm.ARGON2D:return"argon2d";case E.Algorithm.SHA256:return"sha256";case E.Algorithm.SHA512:return"sha512"}throw new Error("Invalid hash algorithm")};E.SIZE=new _map["default"];E.SIZE.set(E.Algorithm.BLAKE2B,32);E.SIZE.set(E.Algorithm.ARGON2D,32);E.SIZE.set(E.Algorithm.SHA256,32);E.SIZE.set(E.Algorithm.SHA512,64);E.NULL=new E(new Uint8Array(32));r.register(E);var A=function(e){(0,_inherits2["default"])(Secret,e);function Secret(e,t){var r;(0,_classCallCheck2["default"])(this,Secret);(r=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Secret).call(this)))._type=e;r._purposeId=t;return r}(0,_createClass2["default"])(Secret,[{key:"exportEncrypted",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee10(e){var t,r,n,i,a,o;return _regenerator["default"].wrap(function _callee10$(s){for(;;)switch(s.prev=s.next){case 0:t=new Uint8Array(Secret.ENCRYPTION_SALT_SIZE);W.lib.getRandomValues(t);(r=new y(4+Secret.SIZE)).writeUint32(this._purposeId);r.write(this.serialize());n=E.computeBlake2b(r).subarray(0,Secret.ENCRYPTION_CHECKSUM_SIZE_V3);(i=new y(n.byteLength+r.byteLength)).write(n);i.write(r);s.next=11;return q.otpKdf(i,e,t,Secret.ENCRYPTION_KDF_ROUNDS);case 11:a=s.sent;(o=new y(2+t.byteLength+a.byteLength)).writeUint8(3);o.writeUint8(Math.log2(Secret.ENCRYPTION_KDF_ROUNDS));o.write(t);o.write(a);return s.abrupt("return",o);case 18:case"end":return s.stop()}},_callee10,this)}));return function exportEncrypted(t){return e.apply(this,arguments)}}()},{key:"encryptedSize",get:function get(){return 2+Secret.ENCRYPTION_SALT_SIZE+Secret.ENCRYPTION_CHECKSUM_SIZE_V3+4+Secret.SIZE}},{key:"type",get:function get(){return this._type}}],[{key:"fromEncrypted",value:function fromEncrypted(e,t){var r=e.readUint8(),n=e.readUint8();if(n>32)throw new Error("Rounds out-of-bounds");var i=Math.pow(2,n);switch(r){case 1:return Secret._decryptV1(e,t,i);case 2:return Secret._decryptV2(e,t,i);case 3:return Secret._decryptV3(e,t,i);default:throw new Error("Unsupported version")}}},{key:"_decryptV1",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee11(e,t,r){var n,i,a,o,s,u,l;return _regenerator["default"].wrap(function _callee11$(c){for(;;)switch(c.prev=c.next){case 0:n=e.read(Secret.SIZE);i=e.read(Secret.ENCRYPTION_SALT_SIZE);a=e.read(Secret.ENCRYPTION_CHECKSUM_SIZE);c.next=5;return q.otpKdfLegacy(n,t,i,r);case 5:o=c.sent;s=new P(o);u=I.derive(s);l=u.hash().subarray(0,Secret.ENCRYPTION_CHECKSUM_SIZE);if(f.equals(a,l)){c.next=11;break}throw new Error("Invalid key");case 11:return c.abrupt("return",s);case 12:case"end":return c.stop()}},_callee11)}));return function _decryptV1(t,r,n){return e.apply(this,arguments)}}()},{key:"_decryptV2",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee12(e,t,r){var n,i,a,o,s;return _regenerator["default"].wrap(function _callee12$(u){for(;;)switch(u.prev=u.next){case 0:n=e.read(Secret.SIZE);i=e.read(Secret.ENCRYPTION_SALT_SIZE);a=e.read(Secret.ENCRYPTION_CHECKSUM_SIZE);u.next=5;return q.otpKdfLegacy(n,t,i,r);case 5:o=u.sent;s=E.computeBlake2b(o).subarray(0,Secret.ENCRYPTION_CHECKSUM_SIZE);if(f.equals(a,s)){u.next=9;break}throw new Error("Invalid key");case 9:return u.abrupt("return",new P(o));case 10:case"end":return u.stop()}},_callee12)}));return function _decryptV2(t,r,n){return e.apply(this,arguments)}}()},{key:"_decryptV3",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee13(e,t,r){var n,i,a,o,s,u,l,c;return _regenerator["default"].wrap(function _callee13$(d){for(;;)switch(d.prev=d.next){case 0:n=e.read(Secret.ENCRYPTION_SALT_SIZE);i=e.read(Secret.ENCRYPTION_CHECKSUM_SIZE_V3+4+Secret.SIZE);d.next=4;return q.otpKdf(i,t,n,r);case 4:a=d.sent;o=a.subarray(0,Secret.ENCRYPTION_CHECKSUM_SIZE_V3);s=a.subarray(Secret.ENCRYPTION_CHECKSUM_SIZE_V3);u=E.computeBlake2b(s).subarray(0,Secret.ENCRYPTION_CHECKSUM_SIZE_V3);if(f.equals(o,u)){d.next=10;break}throw new Error("Invalid key");case 10:l=s[0]<<24|s[1]<<16|s[2]<<8|s[3];c=s.subarray(4);d.t0=l;d.next=d.t0===P.PURPOSE_ID?15:(d.t0,U.PURPOSE_ID,16);break;case 15:return d.abrupt("return",new P(c));case 16:return d.abrupt("return",new U(c));case 17:case"end":return d.stop()}},_callee13)}));return function _decryptV3(t,r,n){return e.apply(this,arguments)}}()}]);return Secret}(S);A.Type={PRIVATE_KEY:1,ENTROPY:2};A.SIZE=32;A.ENCRYPTION_SALT_SIZE=16;A.ENCRYPTION_KDF_ROUNDS=256;A.ENCRYPTION_CHECKSUM_SIZE=4;A.ENCRYPTION_CHECKSUM_SIZE_V3=2;r.register(A);var P=function(e){(0,_inherits2["default"])(PrivateKey,e);function PrivateKey(e){var t;(0,_classCallCheck2["default"])(this,PrivateKey);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(PrivateKey).call(this,A.Type.PRIVATE_KEY,PrivateKey.PURPOSE_ID));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==PrivateKey.SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(PrivateKey,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"overwrite",value:function overwrite(e){this._obj.set(e._obj)}},{key:"equals",value:function equals(e){return e instanceof PrivateKey&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(PrivateKey.prototype),"equals",this).call(this,e)}},{key:"serializedSize",get:function get(){return PrivateKey.SIZE}}],[{key:"generate",value:function generate(){var e=new Uint8Array(PrivateKey.SIZE);W.lib.getRandomValues(e);return new PrivateKey(e)}},{key:"unserialize",value:function unserialize(e){return new PrivateKey(e.read(PrivateKey.SIZE))}},{key:"_privateKeyDelinearize",value:function _privateKeyDelinearize(e,t,r){if(e.byteLength!==PrivateKey.SIZE||t.byteLength!==I.SIZE||r.byteLength!==E.getSize(E.Algorithm.SHA512))throw Error("Wrong buffer size.");if(s.isNodeJs()){var n=new Uint8Array(I.SIZE);NodeNative.node_ed25519_derive_delinearized_private_key(n,new Uint8Array(r),new Uint8Array(t),new Uint8Array(e));return n}var a;try{a=Module.stackSave();var o=Module.stackAlloc(I.SIZE),u=Module.stackAlloc(e.length),l=Module.stackAlloc(t.length),c=Module.stackAlloc(r.length);new Uint8Array(Module.HEAPU8.buffer,u,e.length).set(e);new Uint8Array(Module.HEAPU8.buffer,l,t.length).set(t);new Uint8Array(Module.HEAPU8.buffer,c,r.length).set(r);Module._ed25519_derive_delinearized_private_key(o,c,l,u);var f=new Uint8Array(PrivateKey.SIZE);f.set(new Uint8Array(Module.HEAPU8.buffer,o,PrivateKey.SIZE));return f}catch(d){i.w(CryptoWorkerImpl,d);throw d}finally{a!==undefined&&Module.stackRestore(a)}}}]);return PrivateKey}(A);P.SIZE=A.SIZE;P.PURPOSE_ID=1107296257;r.register(P);var I=function(e){(0,_inherits2["default"])(PublicKey,e);(0,_createClass2["default"])(PublicKey,null,[{key:"copy",value:function copy(e){return e?new PublicKey(new Uint8Array(e._obj)):e}}]);function PublicKey(e){var t;(0,_classCallCheck2["default"])(this,PublicKey);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(PublicKey).call(this));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==PublicKey.SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(PublicKey,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"equals",value:function equals(e){return e instanceof PublicKey&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(PublicKey.prototype),"equals",this).call(this,e)}},{key:"hash",value:function hash(){return E.light(this.serialize())}},{key:"compare",value:function compare(e){return f.compare(this._obj,e._obj)}},{key:"toAddress",value:function toAddress(){return B.fromHash(this.hash())}},{key:"toPeerId",value:function toPeerId(){return new PeerId(this.hash().subarray(0,16))}},{key:"serializedSize",get:function get(){return PublicKey.SIZE}}],[{key:"derive",value:function derive(e){return new PublicKey(PublicKey._publicKeyDerive(e._obj))}},{key:"sum",value:function sum(e){(e=e.slice()).sort(function(e,t){return e.compare(t)});return PublicKey._delinearizeAndAggregatePublicKeys(e)}},{key:"unserialize",value:function unserialize(e){return new PublicKey(e.read(PublicKey.SIZE))}},{key:"fromAny",value:function fromAny(e){if(!e)throw new Error("Invalid public key format");if(e instanceof PublicKey)return e;try{return new PublicKey(f.fromAny(e,PublicKey.SIZE))}catch(t){throw new Error("Invalid public key format")}}},{key:"_delinearizeAndAggregatePublicKeys",value:function _delinearizeAndAggregatePublicKeys(e){var t=e.map(function(e){return e.serialize()}),r=PublicKey._publicKeysHash(t),n=PublicKey._publicKeysDelinearizeAndAggregate(t,r);return new PublicKey(n)}},{key:"_publicKeyDerive",value:function _publicKeyDerive(e){if(e.byteLength!==P.SIZE)throw Error("Wrong buffer size.");if(s.isNodeJs()){var t=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_public_key_derive(t,new Uint8Array(e));return t}var r;try{r=Module.stackSave();var n=Module.stackAlloc(PublicKey.SIZE),a=new Uint8Array(Module.HEAP8.buffer,n,P.SIZE);a.set(e);var o=Module.stackAlloc(e.length),u=new Uint8Array(Module.HEAP8.buffer,o,P.SIZE);u.set(e);Module._ed25519_public_key_derive(n,o);u.fill(0);var l=new Uint8Array(PublicKey.SIZE);l.set(a);return l}catch(c){i.w(PublicKey,c);throw c}finally{r!==undefined&&Module.stackRestore(r)}}},{key:"_publicKeysHash",value:function _publicKeysHash(e){if(e.some(function(e){return e.byteLength!==PublicKey.SIZE}))throw Error("Wrong buffer size.");for(var t,r=new Uint8Array(e.length*PublicKey.SIZE),n=0;n<e.length;++n)r.set(e[n],n*PublicKey.SIZE);if(s.isNodeJs()){var a=new Uint8Array(E.getSize(E.Algorithm.SHA512));NodeNative.node_ed25519_hash_public_keys(a,r,e.length);return a}try{t=Module.stackSave();var o=E.getSize(E.Algorithm.SHA512),u=Module.stackAlloc(o),l=Module.stackAlloc(r.length);new Uint8Array(Module.HEAPU8.buffer,l,r.length).set(r);Module._ed25519_hash_public_keys(u,l,e.length);var c=new Uint8Array(o);c.set(new Uint8Array(Module.HEAPU8.buffer,u,o));return c}catch(f){i.w(PublicKey,f);throw f}finally{t!==undefined&&Module.stackRestore(t)}}},{key:"_publicKeyDelinearize",value:function _publicKeyDelinearize(e,t){if(e.byteLength!==PublicKey.SIZE||t.byteLength!==E.getSize(E.Algorithm.SHA512))throw Error("Wrong buffer size.");if(s.isNodeJs()){var r=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_delinearize_public_key(r,new Uint8Array(t),new Uint8Array(e));return r}var n;try{n=Module.stackSave();var a=Module.stackAlloc(PublicKey.SIZE),o=Module.stackAlloc(e.length),u=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);new Uint8Array(Module.HEAPU8.buffer,u,t.length).set(t);Module._ed25519_delinearize_public_key(a,u,o);var l=new Uint8Array(PublicKey.SIZE);l.set(new Uint8Array(Module.HEAPU8.buffer,a,PublicKey.SIZE));return l}catch(c){i.w(PublicKey,c);throw c}finally{n!==undefined&&Module.stackRestore(n)}}},{key:"_publicKeysDelinearizeAndAggregate",value:function _publicKeysDelinearizeAndAggregate(e,t){if(e.some(function(e){return e.byteLength!==PublicKey.SIZE})||t.byteLength!==E.getSize(E.Algorithm.SHA512))throw Error("Wrong buffer size.");for(var r,n=new Uint8Array(e.length*PublicKey.SIZE),a=0;a<e.length;++a)n.set(e[a],a*PublicKey.SIZE);if(s.isNodeJs()){var o=new Uint8Array(PublicKey.SIZE);NodeNative.node_ed25519_aggregate_delinearized_public_keys(o,new Uint8Array(t),n,e.length);return o}try{r=Module.stackSave();var u=Module.stackAlloc(PublicKey.SIZE),l=Module.stackAlloc(n.length),c=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,l,n.length).set(n);new Uint8Array(Module.HEAPU8.buffer,c,t.length).set(t);Module._ed25519_aggregate_delinearized_public_keys(u,c,l,e.length);var f=new Uint8Array(PublicKey.SIZE);f.set(new Uint8Array(Module.HEAPU8.buffer,u,PublicKey.SIZE));return f}catch(d){i.w(PublicKey,d);throw d}finally{r!==undefined&&Module.stackRestore(r)}}}]);return PublicKey}(S);I.SIZE=32;r.register(I);var C=function(e){(0,_inherits2["default"])(KeyPair,e);function KeyPair(e,t){var r,n=arguments.length>2&&arguments[2]!==undefined&&arguments[2],i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;(0,_classCallCheck2["default"])(this,KeyPair);if(!(e instanceof Object))throw new Error("Primitive: Invalid type");if(!(t instanceof Object))throw new Error("Primitive: Invalid type");(r=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(KeyPair).call(this)))._locked=n;r._lockedInternally=n;r._lockSalt=i;r._publicKey=t;r._internalPrivateKey=new P(e.serialize());return r}(0,_createClass2["default"])(KeyPair,[{key:"serialize",value:function serialize(e){e=e||new y(this.serializedSize);this._privateKey.serialize(e);this.publicKey.serialize(e);if(this._locked){e.writeUint8(1);e.write(this._lockSalt)}else e.writeUint8(0);return e}},{key:"lock",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee14(e,t){return _regenerator["default"].wrap(function _callee14$(r){for(;;)switch(r.prev=r.next){case 0:if(!this._locked){r.next=2;break}throw new Error("KeyPair already locked");case 2:t&&(this._lockSalt=t);if(!this._lockSalt||0===this._lockSalt.length){this._lockSalt=new Uint8Array(32);W.lib.getRandomValues(this._lockSalt)}r.t0=this._internalPrivateKey;r.next=7;return this._otpPrivateKey(e);case 7:r.t1=r.sent;r.t0.overwrite.call(r.t0,r.t1);this._clearUnlockedPrivateKey();this._locked=!0;this._lockedInternally=!0;case 12:case"end":return r.stop()}},_callee14,this)}));return function lock(t,r){return e.apply(this,arguments)}}()},{key:"unlock",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee15(e){var t;return _regenerator["default"].wrap(function _callee15$(r){for(;;)switch(r.prev=r.next){case 0:if(this._locked){r.next=2;break}throw new Error("KeyPair not locked");case 2:r.next=4;return this._otpPrivateKey(e);case 4:t=r.sent;if(!I.derive(t).equals(this.publicKey)){r.next=11;break}this._unlockedPrivateKey=t;this._locked=!1;r.next=12;break;case 11:throw new Error("Invalid key");case 12:case"end":return r.stop()}},_callee15,this)}));return function unlock(t){return e.apply(this,arguments)}}()},{key:"relock",value:function relock(){if(this._locked)throw new Error("KeyPair already locked");if(!this._lockedInternally)throw new Error("KeyPair was never locked");this._clearUnlockedPrivateKey();this._locked=!0}},{key:"_clearUnlockedPrivateKey",value:function _clearUnlockedPrivateKey(){if(this._lockedInternally&&!this._locked){this._unlockedPrivateKey.overwrite(P.unserialize(new y(this._unlockedPrivateKey.serializedSize)));this._unlockedPrivateKey=null}}},{key:"_otpPrivateKey",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee16(e){return _regenerator["default"].wrap(function _callee16$(t){for(;;)switch(t.prev=t.next){case 0:t.t0=P;t.next=3;return q.otpKdfLegacy(this._privateKey.serialize(),e,this._lockSalt,KeyPair.LOCK_KDF_ROUNDS);case 3:t.t1=t.sent;return t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},_callee16,this)}));return function _otpPrivateKey(t){return e.apply(this,arguments)}}()},{key:"exportEncrypted",value:function exportEncrypted(e){return this._privateKey.exportEncrypted(e)}},{key:"equals",value:function equals(e){return e instanceof KeyPair&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(KeyPair.prototype),"equals",this).call(this,e)}},{key:"privateKey",get:function get(){if(this.isLocked)throw new Error("KeyPair is locked");return this._privateKey}},{key:"_privateKey",get:function get(){return this._unlockedPrivateKey||this._internalPrivateKey}},{key:"publicKey",get:function get(){return this._publicKey||(this._publicKey=new I(this._obj.publicKey))}},{key:"serializedSize",get:function get(){return this._privateKey.serializedSize+this.publicKey.serializedSize+(this._locked?this._lockSalt.byteLength+1:1)}},{key:"isLocked",get:function get(){return this._locked}},{key:"encryptedSize",get:function get(){return this._privateKey.encryptedSize}}],[{key:"generate",value:function generate(){var e=P.generate();return new KeyPair(e,I.derive(e))}},{key:"derive",value:function derive(e){return new KeyPair(e,I.derive(e))}},{key:"fromHex",value:function fromHex(e){return KeyPair.unserialize(f.fromHex(e))}},{key:"unserialize",value:function unserialize(e){var t=P.unserialize(e),r=I.unserialize(e),n=!1,i=null;if(e.readPos<e.byteLength){if(1===e.readUint8()){n=!0;i=e.read(32)}}return new KeyPair(t,r,n,i)}},{key:"fromEncrypted",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee17(e,t){var r;return _regenerator["default"].wrap(function _callee17$(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;return A.fromEncrypted(e,t);case 2:if((r=n.sent).type===A.Type.PRIVATE_KEY){n.next=5;break}throw new Error("Expected privateKey, got Entropy");case 5:return n.abrupt("return",KeyPair.derive(r));case 6:case"end":return n.stop()}},_callee17)}));return function fromEncrypted(t,r){return e.apply(this,arguments)}}()}]);return KeyPair}(S);C.LOCK_KDF_ROUNDS=256;r.register(C);var U=function(e){(0,_inherits2["default"])(Entropy,e);function Entropy(e){var t;(0,_classCallCheck2["default"])(this,Entropy);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Entropy).call(this,A.Type.ENTROPY,Entropy.PURPOSE_ID));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Entropy.SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(Entropy,[{key:"toExtendedPrivateKey",value:function toExtendedPrivateKey(e,t){return w.mnemonicToExtendedPrivateKey(this.toMnemonic(t),e)}},{key:"toMnemonic",value:function toMnemonic(e){return w.entropyToMnemonic(this,e)}},{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"overwrite",value:function overwrite(e){this._obj.set(e._obj)}},{key:"equals",value:function equals(e){return e instanceof Entropy&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(Entropy.prototype),"equals",this).call(this,e)}},{key:"serializedSize",get:function get(){return Entropy.SIZE}}],[{key:"generate",value:function generate(){var e=new Uint8Array(Entropy.SIZE);W.lib.getRandomValues(e);return new Entropy(e)}},{key:"unserialize",value:function unserialize(e){return new Entropy(e.read(Entropy.SIZE))}}]);return Entropy}(A);U.SIZE=A.SIZE;U.PURPOSE_ID=1107296258;r.register(U);var x=function(e){(0,_inherits2["default"])(ExtendedPrivateKey,e);function ExtendedPrivateKey(e,t){var r;(0,_classCallCheck2["default"])(this,ExtendedPrivateKey);r=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(ExtendedPrivateKey).call(this));if(!(e instanceof P))throw new Error("ExtendedPrivateKey: Invalid key");if(!(t instanceof Uint8Array))throw new Error("ExtendedPrivateKey: Invalid chainCode");if(t.length!==ExtendedPrivateKey.CHAIN_CODE_SIZE)throw new Error("ExtendedPrivateKey: Invalid chainCode length");r._key=e;r._chainCode=t;return r}(0,_createClass2["default"])(ExtendedPrivateKey,[{key:"derive",value:function derive(e){e<2147483648&&(e+=2147483648);var t=new y(1+P.SIZE+4);t.writeUint8(0);this._key.serialize(t);t.writeUint32(e);var r=q.computeHmacSha512(this._chainCode,t);return new ExtendedPrivateKey(new P(r.slice(0,32)),r.slice(32))}},{key:"derivePath",value:function derivePath(e){if(!ExtendedPrivateKey.isValidPath(e))throw new Error("Invalid path");for(var t=this,r=e.split("/"),n=1;n<r.length;n++){var i=(0,_parseInt2["default"])(r[n]);t=t.derive(i)}return t}},{key:"serialize",value:function serialize(e){e=e||new y(this.serializedSize);this._key.serialize(e);e.write(this._chainCode);return e}},{key:"equals",value:function equals(e){return e instanceof ExtendedPrivateKey&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(ExtendedPrivateKey.prototype),"equals",this).call(this,e)}},{key:"toAddress",value:function toAddress(){return I.derive(this._key).toAddress()}},{key:"serializedSize",get:function get(){return this._key.serializedSize+ExtendedPrivateKey.CHAIN_CODE_SIZE}},{key:"privateKey",get:function get(){return this._key}}],[{key:"generateMasterKey",value:function generateMasterKey(e){var t=f.fromAscii("ed25519 seed"),r=q.computeHmacSha512(t,e);return new ExtendedPrivateKey(new P(r.slice(0,32)),r.slice(32))}},{key:"isValidPath",value:function isValidPath(e){if(null===e.match(/^m(\/[0-9]+')*$/))return!1;for(var t=e.split("/"),r=1;r<t.length;r++)if(!g.isUint32((0,_parseInt2["default"])(t[r])))return!1;return!0}},{key:"derivePathFromSeed",value:function derivePathFromSeed(e,t){return ExtendedPrivateKey.generateMasterKey(t).derivePath(e)}},{key:"unserialize",value:function unserialize(e){return new ExtendedPrivateKey(P.unserialize(e),e.read(ExtendedPrivateKey.CHAIN_CODE_SIZE))}}]);return ExtendedPrivateKey}(S);x.CHAIN_CODE_SIZE=32;r.register(x);var T=function(e){(0,_inherits2["default"])(RandomSecret,e);function RandomSecret(e){var t;(0,_classCallCheck2["default"])(this,RandomSecret);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(RandomSecret).call(this));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==RandomSecret.SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(RandomSecret,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"equals",value:function equals(e){return e instanceof RandomSecret&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(RandomSecret.prototype),"equals",this).call(this,e)}},{key:"serializedSize",get:function get(){return RandomSecret.SIZE}}],[{key:"unserialize",value:function unserialize(e){return new RandomSecret(e.read(RandomSecret.SIZE))}}]);return RandomSecret}(S);T.SIZE=32;r.register(T);var N=function(e){(0,_inherits2["default"])(Signature,e);(0,_createClass2["default"])(Signature,null,[{key:"copy",value:function copy(e){return e?new Signature(new Uint8Array(e._obj)):e}}]);function Signature(e){var t;(0,_classCallCheck2["default"])(this,Signature);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Signature).call(this));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Signature.SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(Signature,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"verify",value:function verify(e,t){return Signature._signatureVerify(e._obj,t,this._obj)}},{key:"equals",value:function equals(e){return e instanceof Signature&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(Signature.prototype),"equals",this).call(this,e)}},{key:"serializedSize",get:function get(){return Signature.SIZE}}],[{key:"create",value:function create(e,t,r){return new Signature(Signature._signatureCreate(e._obj,t._obj,r))}},{key:"fromPartialSignatures",value:function fromPartialSignatures(e,t){var r=Signature._combinePartialSignatures(e.serialize(),t.map(function(e){return e.serialize()}));return new Signature(r)}},{key:"unserialize",value:function unserialize(e){return new Signature(e.read(Signature.SIZE))}},{key:"fromAny",value:function fromAny(e){if(!e)throw new Error("Invalid signature format");if(e instanceof Signature)return e;try{return new Signature(f.fromAny(e,Signature.SIZE))}catch(t){throw new Error("Invalid signature format")}}},{key:"_combinePartialSignatures",value:function _combinePartialSignatures(e,t){var r=Signature._aggregatePartialSignatures(t);return f.concatTypedArrays(e,r)}},{key:"_aggregatePartialSignatures",value:function _aggregatePartialSignatures(e){return e.reduce(function(e,t){return Signature._scalarsAdd(e,t)})}},{key:"_scalarsAdd",value:function _scalarsAdd(e,t){if(e.byteLength!==O.SIZE||t.byteLength!==O.SIZE)throw Error("Wrong buffer size.");if(s.isNodeJs()){var r=new Uint8Array(O.SIZE);NodeNative.node_ed25519_add_scalars(r,new Uint8Array(e),new Uint8Array(t));return r}var n;try{n=Module.stackSave();var a=Module.stackAlloc(O.SIZE),o=Module.stackAlloc(e.length),u=Module.stackAlloc(t.length);new Uint8Array(Module.HEAPU8.buffer,o,e.length).set(e);new Uint8Array(Module.HEAPU8.buffer,u,t.length).set(t);Module._ed25519_add_scalars(a,o,u);var l=new Uint8Array(O.SIZE);l.set(new Uint8Array(Module.HEAPU8.buffer,a,O.SIZE));return l}catch(c){i.w(Signature,c);throw c}finally{n!==undefined&&Module.stackRestore(n)}}},{key:"_signatureCreate",value:function _signatureCreate(e,t,r){if(t.byteLength!==I.SIZE||e.byteLength!==P.SIZE)throw Error("Wrong buffer size.");if(s.isNodeJs()){var n=new Uint8Array(Signature.SIZE);NodeNative.node_ed25519_sign(n,new Uint8Array(r),new Uint8Array(t),new Uint8Array(e));return n}var a;try{a=Module.stackSave();var o=Module.stackAlloc(Signature.SIZE),u=new Uint8Array(Module.HEAP8.buffer,o,Signature.SIZE),l=Module.stackAlloc(r.length);new Uint8Array(Module.HEAP8.buffer,l,r.length).set(r);var c=Module.stackAlloc(t.length);new Uint8Array(Module.HEAP8.buffer,c,t.length).set(t);var f=Module.stackAlloc(e.length),d=new Uint8Array(Module.HEAP8.buffer,f,e.length);d.set(e);Module._ed25519_sign(o,l,r.byteLength,c,f);d.fill(0);var h=new Uint8Array(Signature.SIZE);h.set(u);return h}catch(y){i.w(Signature,y);throw y}finally{a!==undefined&&Module.stackRestore(a)}}},{key:"_signatureVerify",value:function _signatureVerify(e,t,r){if(s.isNodeJs())return!!NodeNative.node_ed25519_verify(new Uint8Array(r),new Uint8Array(t),new Uint8Array(e));var n;try{n=Module.stackSave();var a=Module.stackAlloc(e.length);new Uint8Array(Module.HEAP8.buffer,a,e.length).set(e);var o=Module.stackAlloc(t.length);new Uint8Array(Module.HEAP8.buffer,o,t.length).set(t);var u=Module.stackAlloc(r.length);new Uint8Array(Module.HEAP8.buffer,u,r.length).set(r);return!!Module._ed25519_verify(u,o,t.byteLength,a)}catch(l){i.w(Signature,l);throw l}finally{n!==undefined&&Module.stackRestore(n)}}}]);return Signature}(S);N.SIZE=64;r.register(N);var M=function(e){(0,_inherits2["default"])(Commitment,e);(0,_createClass2["default"])(Commitment,null,[{key:"copy",value:function copy(e){return e?new Commitment(new Uint8Array(e._obj)):e}},{key:"sum",value:function sum(e){return new Commitment(Commitment._commitmentsAggregate(e.map(function(e){return e._obj})))}}]);function Commitment(e){var t;(0,_classCallCheck2["default"])(this,Commitment);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Commitment).call(this));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Commitment.SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(Commitment,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"equals",value:function equals(e){return e instanceof Commitment&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(Commitment.prototype),"equals",this).call(this,e)}},{key:"serializedSize",get:function get(){return Commitment.SIZE}}],[{key:"unserialize",value:function unserialize(e){return new Commitment(e.read(Commitment.SIZE))}},{key:"_commitmentsAggregate",value:function _commitmentsAggregate(e){if(e.some(function(e){return e.byteLength!==I.SIZE}))throw Error("Wrong buffer size.");for(var t,r=new Uint8Array(e.length*I.SIZE),n=0;n<e.length;++n)r.set(e[n],n*I.SIZE);if(s.isNodeJs()){var a=new Uint8Array(I.SIZE);NodeNative.node_ed25519_aggregate_commitments(a,r,e.length);return a}try{t=Module.stackSave();var o=Module.stackAlloc(I.SIZE),u=Module.stackAlloc(r.length);new Uint8Array(Module.HEAPU8.buffer,u,r.length).set(r);Module._ed25519_aggregate_commitments(o,u,e.length);var l=new Uint8Array(I.SIZE);l.set(new Uint8Array(Module.HEAPU8.buffer,o,I.SIZE));return l}catch(c){i.w(CryptoWorkerImpl,c);throw c}finally{t!==undefined&&Module.stackRestore(t)}}}]);return Commitment}(S);M.SIZE=32;r.register(M);var z=function(e){(0,_inherits2["default"])(CommitmentPair,e);function CommitmentPair(e,t){var r;(0,_classCallCheck2["default"])(this,CommitmentPair);r=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(CommitmentPair).call(this));if(!(e instanceof T))throw new Error("Primitive: Invalid type");if(!(t instanceof M))throw new Error("Primitive: Invalid type");r._secret=e;r._commitment=t;return r}(0,_createClass2["default"])(CommitmentPair,[{key:"serialize",value:function serialize(e){e=e||new y(this.serializedSize);this.secret.serialize(e);this.commitment.serialize(e);return e}},{key:"equals",value:function equals(e){return e instanceof CommitmentPair&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(CommitmentPair.prototype),"equals",this).call(this,e)}},{key:"secret",get:function get(){return this._secret}},{key:"commitment",get:function get(){return this._commitment}},{key:"serializedSize",get:function get(){return this.secret.serializedSize+this.commitment.serializedSize}}],[{key:"generate",value:function generate(){var e=new Uint8Array(CommitmentPair.RANDOMNESS_SIZE);W.lib.getRandomValues(e);var t=CommitmentPair._commitmentCreate(e);return new CommitmentPair(new T(t.secret),new M(t.commitment))}},{key:"unserialize",value:function unserialize(e){return new CommitmentPair(T.unserialize(e),M.unserialize(e))}},{key:"fromHex",value:function fromHex(e){return this.unserialize(f.fromHex(e))}},{key:"_commitmentCreate",value:function _commitmentCreate(e){if(s.isNodeJs()){var t=new Uint8Array(I.SIZE),r=new Uint8Array(P.SIZE);NodeNative.node_ed25519_create_commitment(r,t,e);return{commitment:t,secret:r}}var n;try{n=Module.stackSave();var a=Module.stackAlloc(I.SIZE),o=Module.stackAlloc(P.SIZE),u=Module.stackAlloc(e.length);new Uint8Array(Module.HEAPU8.buffer,u,e.length).set(e);var l=Module._ed25519_create_commitment(o,a,u);if(1!==l)throw new Error("Secret must not be 0 or 1: ".concat(l));var c=new Uint8Array(I.SIZE),f=new Uint8Array(P.SIZE);c.set(new Uint8Array(Module.HEAPU8.buffer,a,I.SIZE));f.set(new Uint8Array(Module.HEAPU8.buffer,o,P.SIZE));return{commitment:c,secret:f}}catch(d){i.w(CommitmentPair,d);throw d}finally{n!==undefined&&Module.stackRestore(n)}}}]);return CommitmentPair}(S);z.SERIALIZED_SIZE=T.SIZE+N.SIZE;z.RANDOMNESS_SIZE=32;r.register(z);var O=function(e){(0,_inherits2["default"])(PartialSignature,e);function PartialSignature(e){var t;(0,_classCallCheck2["default"])(this,PartialSignature);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(PartialSignature).call(this));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==PartialSignature.SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(PartialSignature,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"equals",value:function equals(e){return e instanceof PartialSignature&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(PartialSignature.prototype),"equals",this).call(this,e)}},{key:"serializedSize",get:function get(){return PartialSignature.SIZE}}],[{key:"create",value:function create(e,t,r,n,i,a){var o=PartialSignature._delinearizedPartialSignatureCreate(r.map(function(e){return e._obj}),e._obj,t._obj,n._obj,i._obj,a);return new PartialSignature(o)}},{key:"unserialize",value:function unserialize(e){return new PartialSignature(e.read(PartialSignature.SIZE))}},{key:"_delinearizedPartialSignatureCreate",value:function _delinearizedPartialSignatureCreate(e,t,r,n,a,o){if(e.some(function(e){return e.byteLength!==I.SIZE})||t.byteLength!==P.SIZE||r.byteLength!==I.SIZE||n.byteLength!==T.SIZE||a.byteLength!==M.SIZE)throw Error("Wrong buffer size.");for(var u,l=new Uint8Array(e.length*I.SIZE),c=0;c<e.length;++c)l.set(e[c],c*I.SIZE);if(s.isNodeJs()){var f=new Uint8Array(PartialSignature.SIZE);NodeNative.node_ed25519_delinearized_partial_sign(f,new Uint8Array(o),new Uint8Array(a),new Uint8Array(n),new Uint8Array(l),e.length,new Uint8Array(r),new Uint8Array(t));return f}try{u=Module.stackSave();var d=Module.stackAlloc(PartialSignature.SIZE),h=Module.stackAlloc(l.length),y=Module.stackAlloc(t.length),p=Module.stackAlloc(r.length),_=Module.stackAlloc(n.length),g=Module.stackAlloc(a.length),m=Module.stackAlloc(o.length);new Uint8Array(Module.HEAPU8.buffer,h,l.length).set(l);new Uint8Array(Module.HEAPU8.buffer,y,t.length).set(t);new Uint8Array(Module.HEAPU8.buffer,p,r.length).set(r);new Uint8Array(Module.HEAPU8.buffer,_,n.length).set(n);new Uint8Array(Module.HEAPU8.buffer,g,a.length).set(a);new Uint8Array(Module.HEAPU8.buffer,m,o.length).set(o);Module._ed25519_delinearized_partial_sign(d,m,o.length,g,_,h,e.length,p,y);var v=new Uint8Array(PartialSignature.SIZE);v.set(new Uint8Array(Module.HEAPU8.buffer,d,PartialSignature.SIZE));return v}catch(w){i.w(CryptoWorkerImpl,w);throw w}finally{u!==undefined&&Module.stackRestore(u)}}}]);return PartialSignature}(S);O.SIZE=32;r.register(O);var B=function(e){(0,_inherits2["default"])(Address,e);(0,_createClass2["default"])(Address,null,[{key:"copy",value:function copy(e){return e?new Address(new Uint8Array(e._obj)):e}},{key:"fromHash",value:function fromHash(e){return new Address(e.subarray(0,Address.SERIALIZED_SIZE))}}]);function Address(e){var t;(0,_classCallCheck2["default"])(this,Address);t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Address).call(this));if(!(e instanceof Uint8Array))throw new Error("Primitive: Invalid type");if(e.length!==Address.SERIALIZED_SIZE)throw new Error("Primitive: Invalid length");t._obj=e;return t}(0,_createClass2["default"])(Address,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).write(this._obj);return e}},{key:"subarray",value:function subarray(e,t){return this._obj.subarray(e,t)}},{key:"equals",value:function equals(e){return e instanceof Address&&(0,_get2["default"])((0,_getPrototypeOf2["default"])(Address.prototype),"equals",this).call(this,e)}},{key:"toPlain",value:function toPlain(){return this.toUserFriendlyAddress()}},{key:"toUserFriendlyAddress",value:function toUserFriendlyAddress(){var e=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0],t=f.toBase32(this.serialize()),r=("00"+(98-Address._ibanCheck(t+Address.CCODE+"00"))).slice(-2),n=Address.CCODE+r+t;e&&(n=n.replace(/.{4}/g,"$& ").trim());return n}},{key:"serializedSize",get:function get(){return Address.SERIALIZED_SIZE}}],[{key:"unserialize",value:function unserialize(e){return new Address(e.read(Address.SERIALIZED_SIZE))}},{key:"fromAny",value:function fromAny(e){if(e instanceof Address)return e;if("string"==typeof e)return Address.fromString(e);throw new Error("Invalid address format")}},{key:"fromString",value:function fromString(e){try{return Address.fromUserFriendlyAddress(e)}catch(t){}try{return Address.fromHex(e)}catch(t){}try{return Address.fromBase64(e)}catch(t){}throw new Error("Invalid address format")}},{key:"fromBase64",value:function fromBase64(e){return new Address(f.fromBase64(e))}},{key:"fromHex",value:function fromHex(e){return new Address(f.fromHex(e))}},{key:"fromUserFriendlyAddress",value:function fromUserFriendlyAddress(e){if((e=e.replace(/ /g,"")).substr(0,2).toUpperCase()!==Address.CCODE)throw new Error("Invalid Address: Wrong country code");if(36!==e.length)throw new Error("Invalid Address: Should be 36 chars (ignoring spaces)");if(1!==Address._ibanCheck(e.substr(4)+e.substr(0,4)))throw new Error("Invalid Address: Checksum invalid");return new Address(f.fromBase32(e.substr(4)))}},{key:"_ibanCheck",value:function _ibanCheck(e){for(var t=e.split("").map(function(e){var t=e.toUpperCase().charCodeAt(0);return t>=48&&t<=57?e:(t-55).toString()}).join(""),r="",n=0;n<Math.ceil(t.length/6);n++)r=((0,_parseInt2["default"])(r+t.substr(6*n,6))%97).toString();return(0,_parseInt2["default"])(r)}}]);return Address}(S);B.CCODE="NQ";B.SERIALIZED_SIZE=20;B.HEX_SIZE=40;B.NULL=new B(new Uint8Array(B.SERIALIZED_SIZE));B.CONTRACT_CREATION=new B(new Uint8Array(B.SERIALIZED_SIZE));r.register(B);var L=function(){function Account(e,t){(0,_classCallCheck2["default"])(this,Account);if(!g.isUint8(e))throw new Error("Malformed type");if(!g.isUint64(t))throw new Error("Malformed balance");this._type=e;this._balance=t}(0,_createClass2["default"])(Account,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).writeUint8(this._type);e.writeUint64(this._balance);return e}},{key:"equals",value:function equals(e){return f.equals(this.serialize(),e.serialize())}},{key:"toString",value:function toString(){return"Account{type=".concat(this._type,", balance=").concat(this._balance.toString())}},{key:"toPlain",value:function toPlain(){return{type:Account.Type.toString(this.type),balance:this.balance}}},{key:"withBalance",value:function withBalance(e){throw new Error("Not yet implemented.")}},{key:"withOutgoingTransaction",value:function withOutgoingTransaction(e,t,r){if(arguments.length>3&&arguments[3]!==undefined&&arguments[3]){if(t<e.validityStartHeight||t>=e.validityStartHeight+k.TRANSACTION_VALIDITY_WINDOW)throw new Account.ValidityError;return this.withBalance(this._balance+e.value+e.fee)}var n=this._balance-e.value-e.fee;if(n<0)throw new Account.BalanceError;if(t<e.validityStartHeight||t>=e.validityStartHeight+k.TRANSACTION_VALIDITY_WINDOW)throw new Account.ValidityError;if(r.containsTransaction(e))throw new Account.DoubleTransactionError;return this.withBalance(n)}},{key:"withIncomingTransaction",value:function withIncomingTransaction(e,t){if(arguments.length>2&&arguments[2]!==undefined&&arguments[2]){var r=this._balance-e.value;if(r<0)throw new Account.BalanceError;return this.withBalance(r)}return this.withBalance(this._balance+e.value)}},{key:"withContractCommand",value:function withContractCommand(e,t){arguments.length>2&&arguments[2]!==undefined&&arguments[2];throw new Error("Not yet implemented")}},{key:"isInitial",value:function isInitial(){return this===Account.INITIAL}},{key:"isToBePruned",value:function isToBePruned(){return 0===this._balance&&!this.isInitial()}},{key:"serializedSize",get:function get(){return 9}},{key:"balance",get:function get(){return this._balance}},{key:"type",get:function get(){return this._type}}],[{key:"unserialize",value:function unserialize(e){var t=e.readUint8();e.readPos--;if(!Account.TYPE_MAP.has(t))throw new Error("Unknown account type");return Account.TYPE_MAP.get(t).unserialize(e)}},{key:"fromAny",value:function fromAny(e){return e instanceof Account?e:Account.fromPlain(e)}},{key:"fromPlain",value:function fromPlain(e){if(!e||e.type===undefined)throw new Error("Invalid account");var t=Account.Type.fromAny(e.type);return Account.TYPE_MAP.get(t).fromPlain(e)}},{key:"dataToPlain",value:function dataToPlain(e){return{}}},{key:"proofToPlain",value:function proofToPlain(e){return{}}}]);return Account}();L.Type={BASIC:0,VESTING:1,HTLC:2};L.Type.toString=function(e){switch(e){case L.Type.BASIC:return"basic";case L.Type.VESTING:return"vesting";case L.Type.HTLC:return"htlc"}throw new Error("Invalid account type")};L.Type.fromAny=function(e){if("number"==typeof e)return e;switch(e){case"basic":return L.Type.BASIC;case"vesting":return L.Type.VESTING;case"htlc":return L.Type.HTLC}throw new Error("Invalid account type")};L.TYPE_MAP=new _map["default"];L.BalanceError=function(e){(0,_inherits2["default"])(_class,e);function _class(){(0,_classCallCheck2["default"])(this,_class);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(_class).call(this,"Balance Error!"))}return _class}((0,_wrapNativeSuper2["default"])(Error));L.DoubleTransactionError=function(e){(0,_inherits2["default"])(_class2,e);function _class2(){(0,_classCallCheck2["default"])(this,_class2);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(_class2).call(this,"Double Transaction Error!"))}return _class2}((0,_wrapNativeSuper2["default"])(Error));L.ProofError=function(e){(0,_inherits2["default"])(_class3,e);function _class3(){(0,_classCallCheck2["default"])(this,_class3);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(_class3).call(this,"Proof Error!"))}return _class3}((0,_wrapNativeSuper2["default"])(Error));L.ValidityError=function(e){(0,_inherits2["default"])(_class4,e);function _class4(){(0,_classCallCheck2["default"])(this,_class4);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(_class4).call(this,"Validity Error!"))}return _class4}((0,_wrapNativeSuper2["default"])(Error));r.register(L);var j=function(){function Transaction(e,t,r,n,i,a,o,s,u,l,c){var f=arguments.length>11&&arguments[11]!==undefined?arguments[11]:F.NETWORK_ID;(0,_classCallCheck2["default"])(this,Transaction);if(!(t instanceof B))throw new Error("Malformed sender");if(!g.isUint8(r))throw new Error("Malformed sender type");if(!(n instanceof B))throw new Error("Malformed recipient");if(!g.isUint8(i))throw new Error("Malformed recipient type");if(!g.isUint64(a)||0===a)throw new Error("Malformed value");if(!g.isUint64(o))throw new Error("Malformed fee");if(!g.isUint32(s))throw new Error("Malformed validityStartHeight");if(!g.isUint8(u)&&(u&~Transaction.Flag.ALL)>0)throw new Error("Malformed flags");if(!(l instanceof Uint8Array&&g.isUint16(l.byteLength)))throw new Error("Malformed data");if(c&&(!(c instanceof Uint8Array)||!g.isUint16(c.byteLength)))throw new Error("Malformed proof");if(!g.isUint8(f))throw new Error("Malformed networkId");this._format=e;this._sender=t;this._senderType=r;this._recipient=n;this._recipientType=i;this._value=a;this._fee=o;this._networkId=f;this._validityStartHeight=s;this._flags=u;this._data=l;this._proof=c;this._recipient===B.CONTRACT_CREATION&&(this._recipient=this.getContractCreationAddress())}(0,_createClass2["default"])(Transaction,[{key:"serializeContent",value:function serializeContent(e){(e=e||new y(this.serializedContentSize)).writeUint16(this._data.byteLength);e.write(this._data);this._sender.serialize(e);e.writeUint8(this._senderType);this._recipient.serialize(e);e.writeUint8(this._recipientType);e.writeUint64(this._value);e.writeUint64(this._fee);e.writeUint32(this._validityStartHeight);e.writeUint8(this._networkId);e.writeUint8(this._flags);return e}},{key:"verify",value:function verify(e){this._valid===undefined&&(this._valid=this._verify(e));return this._valid}},{key:"_verify",value:function _verify(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:F.NETWORK_ID;if(this._networkId!==e){i.w(Transaction,"Transaction is not valid in this network",this);return!1}if(this._recipient.equals(this._sender)){i.w(Transaction,"Sender and recipient must not match",this);return!1}if(!L.TYPE_MAP.has(this._senderType)||!L.TYPE_MAP.has(this._recipientType)){i.w(Transaction,"Invalid account type",this);return!1}if(!L.TYPE_MAP.get(this._senderType).verifyOutgoingTransaction(this)){i.w(Transaction,"Invalid for sender",this);return!1}if(!L.TYPE_MAP.get(this._recipientType).verifyIncomingTransaction(this)){i.w(Transaction,"Invalid for recipient",this);return!1}return!0}},{key:"serialize",value:function serialize(e){throw new Error("Method needs to be overwritten by subclasses")}},{key:"hash",value:function hash(){this._hash=this._hash||E.light(this.serializeContent());return this._hash}},{key:"compare",value:function compare(e){return this.fee/this.serializedSize>e.fee/e.serializedSize?-1:this.fee/this.serializedSize<e.fee/e.serializedSize?1:this.serializedSize>e.serializedSize?-1:this.serializedSize<e.serializedSize?1:this.fee>e.fee?-1:this.fee<e.fee?1:this.value>e.value?-1:this.value<e.value?1:this.compareBlockOrder(e)}},{key:"compareBlockOrder",value:function compareBlockOrder(e){var t=this._recipient.compare(e._recipient);if(0!==t)return t;if(this._validityStartHeight<e._validityStartHeight)return-1;if(this._validityStartHeight>e._validityStartHeight)return 1;if(this._fee>e._fee)return-1;if(this._fee<e._fee)return 1;if(this._value>e._value)return-1;if(this._value<e._value)return 1;var r=this._sender.compare(e._sender);return 0!==r?r:this._recipientType<e._recipientType?-1:this._recipientType>e._recipientType?1:this._senderType<e._senderType?-1:this._senderType>e._senderType?1:this._flags<e._flags?-1:this._flags>e._flags?1:f.compare(this._data,e._data)}},{key:"equals",value:function equals(e){return e instanceof Transaction&&this._sender.equals(e._sender)&&this._senderType===e._senderType&&this._recipient.equals(e._recipient)&&this._recipientType===e._recipientType&&this._value===e._value&&this._fee===e._fee&&this._validityStartHeight===e._validityStartHeight&&this._networkId===e._networkId&&this._flags===e._flags&&f.equals(this._data,e._data)}},{key:"toString",value:function toString(){return"Transaction{"+"sender=".concat(this._sender.toBase64(),", ")+"recipient=".concat(this._recipient.toBase64(),", ")+"value=".concat(this._value,", ")+"fee=".concat(this._fee,", ")+"validityStartHeight=".concat(this._validityStartHeight,", ")+"networkId=".concat(this._networkId)+"}"}},{key:"toPlain",value:function toPlain(){var e=L.TYPE_MAP.get(this.recipientType).dataToPlain(this.data);e.raw=f.toHex(this.data);var t=L.TYPE_MAP.get(this.senderType).proofToPlain(this.proof);t.raw=f.toHex(this.proof);return{transactionHash:this.hash().toPlain(),format:Transaction.Format.toString(this._format),sender:this.sender.toPlain(),senderType:L.Type.toString(this.senderType),recipient:this.recipient.toPlain(),recipientType:L.Type.toString(this.recipientType),value:this.value,fee:this.fee,feePerByte:this.feePerByte,validityStartHeight:this.validityStartHeight,network:F.networkIdToNetworkName(this.networkId),flags:this.flags,data:e,proof:t,size:this.serializedSize,valid:this.verify()}}},{key:"getContractCreationAddress",value:function getContractCreationAddress(){var e=Transaction.unserialize(this.serialize());e._recipient=B.NULL;e._hash=null;return B.fromHash(e.hash())}},{key:"hasFlag",value:function hasFlag(e){return(this._flags&e)>0}},{key:"serializedContentSize",get:function get(){return 2+this._data.byteLength+this._sender.serializedSize+1+this._recipient.serializedSize+1+8+8+4+1+1}},{key:"serializedSize",get:function get(){throw new Error("Getter needs to be overwritten by subclasses")}},{key:"format",get:function get(){return this._format}},{key:"sender",get:function get(){return this._sender}},{key:"senderType",get:function get(){return this._senderType}},{key:"recipient",get:function get(){return this._recipient}},{key:"recipientType",get:function get(){return this._recipientType}},{key:"value",get:function get(){return this._value}},{key:"fee",get:function get(){return this._fee}},{key:"feePerByte",get:function get(){return this._fee/this.serializedSize}},{key:"networkId",get:function get(){return this._networkId}},{key:"validityStartHeight",get:function get(){return this._validityStartHeight}},{key:"flags",get:function get(){return this._flags}},{key:"data",get:function get(){return this._data}},{key:"proof",get:function get(){return this._proof},set:function set(e){this._proof=e}}],[{key:"unserialize",value:function unserialize(e){var t=e.readUint8();e.readPos--;if(!Transaction.FORMAT_MAP.has(t))throw new Error("Invalid transaction type");return Transaction.FORMAT_MAP.get(t).unserialize(e)}},{key:"fromPlain",value:function fromPlain(e){if(!e)throw new Error("Invalid transaction format");var t=Transaction.Format.fromAny(e.format);if(!Transaction.FORMAT_MAP.has(t))throw new Error("Invalid transaction type");return Transaction.FORMAT_MAP.get(t).fromPlain(e)}},{key:"fromAny",value:function fromAny(e){if(e instanceof Transaction)return e;if("object"===(0,_typeof2["default"])(e))return Transaction.fromPlain(e);if("string"==typeof e)return Transaction.unserialize(new y(f.fromHex(e)));throw new Error("Invalid transaction format")}}]);return Transaction}();j.Format={BASIC:0,EXTENDED:1};j.Format.toString=function(e){switch(e){case j.Format.BASIC:return"basic";case j.Format.EXTENDED:return"extended"}throw new Error("Invalid transaction format")};j.Format.fromAny=function(e){if("number"==typeof e)return e;switch(e){case"basic":return j.Format.BASIC;case"extended":return j.Format.EXTENDED}throw new Error("Invalid transaction format")};j.Flag={NONE:0,CONTRACT_CREATION:1,ALL:1};j.FORMAT_MAP=new _map["default"];r.register(j);var R=function(){(0,_createClass2["default"])(SignatureProof,null,[{key:"verifyTransaction",value:function verifyTransaction(e){try{var t=new y(e.proof),r=SignatureProof.unserialize(t);if(t.readPos!==t.byteLength){i.w(SignatureProof,"Invalid SignatureProof - overlong");return!1}return r.verify(e.sender,e.serializeContent())}catch(n){i.w(SignatureProof,"Failed to verify transaction: ".concat(n.message||n));return!1}}},{key:"singleSig",value:function singleSig(e,t){return new SignatureProof(e,new m([]),t)}},{key:"multiSig",value:function multiSig(e,t,r){return new SignatureProof(e,m.compute(t,e),r)}}]);function SignatureProof(e,t,r){(0,_classCallCheck2["default"])(this,SignatureProof);if(!(e instanceof I))throw new Error("Malformed publickKey");if(!(t instanceof m))throw new Error("Malformed merklePath");if(r&&!(r instanceof N))throw new Error("Malformed signature");this._publicKey=e;this._merklePath=t;this._signature=r}(0,_createClass2["default"])(SignatureProof,[{key:"serialize",value:function serialize(e){e=e||new y(this.serializedSize);this._publicKey.serialize(e);this._merklePath.serialize(e);this._signature&&this._signature.serialize(e);return e}},{key:"equals",value:function equals(e){return e instanceof SignatureProof&&this._publicKey.equals(e._publicKey)&&this._merklePath.equals(e._merklePath)&&(this._signature?this._signature.equals(e._signature):this._signature===e._signature)}},{key:"verify",value:function verify(e,t){if(null!==e&&!this.isSignedBy(e)){i.w(SignatureProof,"Invalid SignatureProof - signer does not match sender address");return!1}if(!this._signature){i.w(SignatureProof,"Invalid SignatureProof - signature is missing");return!1}if(!this._signature.verify(this._publicKey,t)){i.w(SignatureProof,"Invalid SignatureProof - signature is invalid");return!1}return!0}},{key:"isSignedBy",value:function isSignedBy(e){var t=this._merklePath.computeRoot(this._publicKey);return B.fromHash(t).equals(e)}},{key:"serializedSize",get:function get(){return this._publicKey.serializedSize+this._merklePath.serializedSize+(this._signature?this._signature.serializedSize:0)}},{key:"publicKey",get:function get(){return this._publicKey}},{key:"merklePath",get:function get(){return this._merklePath}},{key:"signature",get:function get(){return this._signature},set:function set(e){this._signature=e}}],[{key:"unserialize",value:function unserialize(e){return new SignatureProof(I.unserialize(e),m.unserialize(e),N.unserialize(e))}},{key:"SINGLE_SIG_SIZE",get:function get(){return I.SIZE+new m([]).serializedSize+N.SIZE}}]);return SignatureProof}();r.register(R);var H=function(e){(0,_inherits2["default"])(BasicTransaction,e);function BasicTransaction(e,t,r,n,i,a,o){var s;(0,_classCallCheck2["default"])(this,BasicTransaction);if(!(e instanceof I))throw new Error("Malformed senderPubKey");if(a!==undefined&&!(a instanceof N))throw new Error("Malformed signature");var u=R.singleSig(e,a);(s=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(BasicTransaction).call(this,j.Format.BASIC,e.toAddress(),L.Type.BASIC,t,L.Type.BASIC,r,n,i,j.Flag.NONE,new Uint8Array(0),u.serialize(),o)))._signatureProof=u;return s}(0,_createClass2["default"])(BasicTransaction,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).writeUint8(j.Format.BASIC);this.senderPubKey.serialize(e);this._recipient.serialize(e);e.writeUint64(this._value);e.writeUint64(this._fee);e.writeUint32(this._validityStartHeight);e.writeUint8(this._networkId);this.signature.serialize(e);return e}},{key:"serializedSize",get:function get(){return 1+this.senderPubKey.serializedSize+this._recipient.serializedSize+8+8+4+1+this.signature.serializedSize}},{key:"senderPubKey",get:function get(){return this._signatureProof.publicKey}},{key:"signature",get:function get(){return this._signatureProof.signature},set:function set(e){this._signatureProof.signature=e;this._proof=this._signatureProof.serialize()}}],[{key:"unserialize",value:function unserialize(e){var t=e.readUint8();c.that(t===j.Format.BASIC);var r=I.unserialize(e),n=B.unserialize(e),i=e.readUint64(),a=e.readUint64(),o=e.readUint32(),s=e.readUint8();return new BasicTransaction(r,n,i,a,o,N.unserialize(e),s)}},{key:"fromPlain",value:function fromPlain(e){if(!e)throw new Error("Invalid transaction format");return new BasicTransaction(I.fromAny(e.proof.publicKey||e.senderPubKey),B.fromAny(e.recipient),e.value,e.fee,e.validityStartHeight,N.fromAny(e.proof.signature||e.signature),F.networkIdFromAny(e.network||e.networkId))}}]);return BasicTransaction}(j);j.FORMAT_MAP.set(j.Format.BASIC,H);r.register(H);var K=function(e){(0,_inherits2["default"])(ExtendedTransaction,e);function ExtendedTransaction(e,t,r,n,i,a,o,s,u){var l=arguments.length>9&&arguments[9]!==undefined?arguments[9]:new Uint8Array(0),c=arguments.length>10?arguments[10]:undefined;(0,_classCallCheck2["default"])(this,ExtendedTransaction);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(ExtendedTransaction).call(this,j.Format.EXTENDED,e,t,r,n,i,a,o,s,u,l,c))}(0,_createClass2["default"])(ExtendedTransaction,[{key:"serialize",value:function serialize(e){(e=e||new y(this.serializedSize)).writeUint8(j.Format.EXTENDED);this.serializeContent(e);e.writeUint16(this._proof.byteLength);e.write(this._proof);return e}},{key:"serializedSize",get:function get(){return 1+this.serializedContentSize+2+this._proof.byteLength}}],[{key:"unserialize",value:function unserialize(e){var t=e.readUint8();c.that(t===j.Format.EXTENDED);var r=e.readUint16(),n=e.read(r),i=B.unserialize(e),a=e.readUint8(),o=B.unserialize(e),s=e.readUint8(),u=e.readUint64(),l=e.readUint64(),f=e.readUint32(),d=e.readUint8(),h=e.readUint8(),y=e.readUint16();return new ExtendedTransaction(i,a,o,s,u,l,f,h,n,e.read(y),d)}},{key:"fromPlain",value:function fromPlain(e){if(!e)throw new Error("Invalid transaction format");return new ExtendedTransaction(B.fromAny(e.sender),L.Type.fromAny(e.senderType),B.fromAny(e.recipient),L.Type.fromAny(e.recipientType),e.value,e.fee,e.validityStartHeight,e.flags,f.fromAny(e.data.raw===undefined?e.data:e.data.raw),f.fromAny(e.proof.raw===undefined?e.proof:e.proof.raw),F.networkIdFromAny(e.network||e.networkId))}}]);return ExtendedTransaction}(j);j.FORMAT_MAP.set(j.Format.EXTENDED,K);r.register(K);var D=function(){function IWorker(){(0,_classCallCheck2["default"])(this,IWorker)}(0,_createClass2["default"])(IWorker,null,[{key:"createProxy",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee18(e,t,r){return _regenerator["default"].wrap(function _callee18$(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new(IWorker.Proxy(e))(r,t));case 1:case"end":return n.stop()}},_callee18)}));return function createProxy(t,r,n){return e.apply(this,arguments)}}()},{key:"startWorkerForProxy",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee19(e,t,r){return _regenerator["default"].wrap(function _callee19$(n){for(;;)switch(n.prev=n.next){case 0:if(IWorker._workersSupported){n.next=6;break}n.next=3;return IWorker._workerImplementation[e.name].init(t);case 3:return n.abrupt("return",IWorker._workerImplementation[e.name]);case 6:r||(r="".concat(Nimiq._path,"worker.js"));return n.abrupt("return",IWorker.createProxy(e,t,new Worker(URL.createObjectURL(new Blob(["Nimiq = {_path: '".concat(Nimiq._path,"'}; importScripts('").concat(r.replace(/'/g,""),"');")])))));case 8:case"end":return n.stop()}},_callee19)}));return function startWorkerForProxy(t,r,n){return e.apply(this,arguments)}}()},{key:"startWorkerPoolForProxy",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee20(e,t,r,n){return _regenerator["default"].wrap(function _callee20$(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new(IWorker.Pool(e))(function(t){return IWorker.startWorkerForProxy(e,t,n)},t,r).start());case 1:case"end":return i.stop()}},_callee20)}));return function startWorkerPoolForProxy(t,r,n,i){return e.apply(this,arguments)}}()},{key:"stubBaseOnMessage",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee21(e){var t;return _regenerator["default"].wrap(function _callee21$(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0;if("init"!==e.data.command){r.next=12;break}if(!IWorker._workerImplementation[e.data.args[0]]){r.next=9;break}r.next=5;return IWorker._workerImplementation[e.data.args[0]].init(e.data.args[1]);case 5:t=r.sent;self.postMessage({status:"OK",result:t,id:e.data.id});r.next=10;break;case 9:self.postMessage({status:"error",result:"Unknown worker!",id:e.data.id});case 10:r.next=13;break;case 12:self.postMessage({status:"error",result:"Worker not yet initialized!",id:e.data.id});case 13:r.next=18;break;case 15:r.prev=15;r.t0=r["catch"](0);self.postMessage({status:"error",result:r.t0,id:e.data.id});case 18:case"end":return r.stop()}},_callee21,null,[[0,15]])}));return function stubBaseOnMessage(t){return e.apply(this,arguments)}}()},{key:"prepareForWorkerUse",value:function prepareForWorkerUse(e,t){IWorker._insideWebWorker&&(self.onmessage=IWorker.stubBaseOnMessage);IWorker._workerImplementation=IWorker._workerImplementation||{};IWorker._workerImplementation[e.name]=t}},{key:"_loadBrowserScript",value:function _loadBrowserScript(e,t){var r=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript";n.src=e;var i=function ret(){return setTimeout(t,100)};n.onreadystatechange=i;n.onload=i;r.appendChild(n)}},{key:"Proxy",value:function Proxy(e){var t=function(t){(0,_inherits2["default"])(proxyClass,t);function proxyClass(t,r){var n;(0,_classCallCheck2["default"])(this,proxyClass);(n=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(proxyClass).call(this)))._name=r;n._messageId=0;n._worker=t;n._worker.onmessage=n._receive.bind((0,_assertThisInitialized2["default"])(n));n._waiting=new _map["default"];return(0,_possibleConstructorReturn2["default"])(n,n._invoke("init",[e.name,r]).then(function(){return(0,_assertThisInitialized2["default"])(n)}))}(0,_createClass2["default"])(proxyClass,[{key:"_receive",value:function _receive(e){var t=this._waiting.get(e.data.id);if(t){this._waiting["delete"](e.data.id);"OK"===e.data.status?t.resolve(e.data.result):"error"===e.data.status&&t.error(e.data.result)}else i.w(WorkerProxy,"Unknown reply",e)}},{key:"_invoke",value:function _invoke(e){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];return new _promise["default"](function(n,i){var a={command:e,args:r,id:t._messageId++};t._waiting.set(a.id,{resolve:n,error:i});t._worker.postMessage(a)})}},{key:"destroy",value:function destroy(){return this._invoke("destroy")}}]);return proxyClass}(e),r=!0,n=!1,a=undefined;try{for(var o,s=function _loop3(){var r=o.value;"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._invoke(r,t)})},u=(0,_getIterator2["default"])((0,_getOwnPropertyNames["default"])(e.prototype));!(r=(o=u.next()).done);r=!0)s()}catch(l){n=!0;a=l}finally{try{r||null==u["return"]||u["return"]()}finally{if(n)throw a}}return t}},{key:"Stub",value:function Stub(e){var Stub=function(e){(0,_inherits2["default"])(Stub,e);function Stub(){(0,_classCallCheck2["default"])(this,Stub);return(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(Stub).call(this))}(0,_createClass2["default"])(Stub,[{key:"_result",value:function _result(e,t,r){self.postMessage({status:t,result:r,id:e.data.id})}},{key:"_onmessage",value:function _onmessage(e){var t=this;try{var r=this._invoke(e.data.command,e.data.args);r instanceof _promise["default"]?r.then(function(r){t._result(e,"OK",r)}):this._result(e,"OK",r)}catch(n){this._result(e,"error",n.message||n)}}},{key:"init",value:function init(e){var t=this;this._name=e;if(IWorker._insideWebWorker){self.name=e;self.onmessage=function(e){return t._onmessage(e)}}}},{key:"_invoke",value:function _invoke(e,t){return this[e].apply(this,t)}},{key:"destroy",value:function destroy(){IWorker._insideWebWorker&&self.close()}}]);return Stub}(e),t=!0,r=!1,n=undefined;try{for(var i,a=function _loop4(){var t=i.value;"function"==typeof e.prototype[t]&&"constructor"!==t&&(Stub.prototype[t]=function(){throw"Not implemented in IWorker Stub: ".concat(t)})},o=(0,_getIterator2["default"])((0,_getOwnPropertyNames["default"])(e.prototype));!(t=(i=o.next()).done);t=!0)a()}catch(s){r=!0;n=s}finally{try{t||null==o["return"]||o["return"]()}finally{if(r)throw n}}return Stub}},{key:"Pool",value:function Pool(e){var t=function(e){(0,_inherits2["default"])(poolClass,e);function poolClass(e){var t,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"pool",n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;(0,_classCallCheck2["default"])(this,poolClass);(t=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(poolClass).call(this)))._proxyInitializer=e;t._name=r;t._poolSize=n;t._workers=[];t._freeWorkers=[];t._waitingCalls=[];return t}(0,_createClass2["default"])(poolClass,[{key:"start",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee22(){return _regenerator["default"].wrap(function _callee22$(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;return this._updateToSize();case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}},_callee22,this)}));return function start(){return e.apply(this,arguments)}}()},{key:"destroy",value:function destroy(){this._poolSize=0;return this._updateToSize()}},{key:"_invoke",value:function _invoke(e,t){var r=this;return IWorker._workersSupported?new _promise["default"](function(n,a){r._waitingCalls.push({name:e,args:t,resolve:n,error:a});var o=r._freeWorkers.shift();o&&r._step(o)["catch"](i.w.tag(IWorker))}):this._workers[0][e].apply(this._workers[0],t)}},{key:"_step",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee23(e){var t;return _regenerator["default"].wrap(function _callee23$(r){for(;;)switch(r.prev=r.next){case 0:t=this._waitingCalls.shift();case 1:if(!t){r.next=19;break}r.prev=2;r.t0=t;r.next=6;return e[t.name].apply(e,t.args);case 6:r.t1=r.sent;r.t0.resolve.call(r.t0,r.t1);r.next=13;break;case 10:r.prev=10;r.t2=r["catch"](2);t.error(r.t2);case 13:if(-1!==this._workers.indexOf(e)){r.next=16;break}e.destroy();return r.abrupt("return");case 16:t=this._waitingCalls.shift();r.next=1;break;case 19:this._freeWorkers.push(e);case 20:case"end":return r.stop()}},_callee23,this,[[2,10]])}));return function _step(t){return e.apply(this,arguments)}}()},{key:"_updateToSize",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee24(){var e,t,r,n,a,o,s,u,l,c;return _regenerator["default"].wrap(function _callee24$(f){for(;;)switch(f.prev=f.next){case 0:if("undefined"==typeof Worker&&this._poolSize>1){i.d(IWorker,"Pool of size larger than 1 requires WebWorker support.");this._poolSize=1}e=[];for(;this._workers.length+e.length<this._poolSize;)e.push(this._proxyInitializer("".concat(this._name,"#").concat(this._workers.length+e.length)));f.next=5;return _promise["default"].all(e);case 5:t=f.sent;r=!0;n=!1;a=undefined;f.prev=9;for(o=(0,_getIterator2["default"])(t);!(r=(s=o.next()).done);r=!0){u=s.value;this._workers.push(u);this._step(u)["catch"](i.w.tag(IWorker))}f.next=17;break;case 13:f.prev=13;f.t0=f["catch"](9);n=!0;a=f.t0;case 17:f.prev=17;f.prev=18;r||null==o["return"]||o["return"]();case 20:f.prev=20;if(!n){f.next=23;break}throw a;case 23:return f.finish(20);case 24:return f.finish(17);case 25:for(;this._workers.length>this._poolSize;){l=this._freeWorkers.shift()||this._workers.pop();if((c=this._workers.indexOf(l))>=0){this._workers.splice(c,1);l.destroy()}}return f.abrupt("return",this);case 27:case"end":return f.stop()}},_callee24,this,[[9,13,17,25],[18,,20,24]])}));return function _updateToSize(){return e.apply(this,arguments)}}()},{key:"poolSize",get:function get(){return this._poolSize},set:function set(e){this._poolSize=e;this._updateToSize()["catch"](i.w.tag(IWorker))}}]);return poolClass}(e),r=!0,n=!1,a=undefined;try{for(var o,s=function _loop5(){var r=o.value;"function"==typeof e.prototype[r]&&"constructor"!==r&&(t.prototype[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._invoke(r,t)})},u=(0,_getIterator2["default"])((0,_getOwnPropertyNames["default"])(e.prototype));!(r=(o=u.next()).done);r=!0)s()}catch(l){n=!0;a=l}finally{try{r||null==u["return"]||u["return"]()}finally{if(n)throw a}}return t}},{key:"_workersSupported",get:function get(){return"undefined"!=typeof Worker}},{key:"areWorkersAsync",get:function get(){return IWorker._workersSupported}},{key:"_insideWebWorker",get:function get(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_global",get:function get(){return"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:null}}]);return IWorker}();D._moduleLoadedCallbacks={};D._workerImplementation={};r.register(D);var W=function(){function CryptoWorker(){(0,_classCallCheck2["default"])(this,CryptoWorker)}(0,_createClass2["default"])(CryptoWorker,[{key:"computeArgon2d",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee25(e){return _regenerator["default"].wrap(function _callee25$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},_callee25)}));return function computeArgon2d(t){return e.apply(this,arguments)}}()},{key:"computeArgon2dBatch",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee26(e){return _regenerator["default"].wrap(function _callee26$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},_callee26)}));return function computeArgon2dBatch(t){return e.apply(this,arguments)}}()},{key:"kdfLegacy",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee27(e,t,r,n){return _regenerator["default"].wrap(function _callee27$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},_callee27)}));return function kdfLegacy(t,r,n,i){return e.apply(this,arguments)}}()},{key:"kdf",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee28(e,t,r,n){return _regenerator["default"].wrap(function _callee28$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},_callee28)}));return function kdf(t,r,n,i){return e.apply(this,arguments)}}()},{key:"blockVerify",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee29(e,t,r,n,i){return _regenerator["default"].wrap(function _callee29$(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},_callee29)}));return function blockVerify(t,r,n,i,a){return e.apply(this,arguments)}}()}],[{key:"getInstanceAsync",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee30(){return _regenerator["default"].wrap(function _callee30$(e){for(;;)switch(e.prev=e.next){case 0:if(CryptoWorker._workerAsync){e.next=4;break}e.next=3;return D.startWorkerPoolForProxy(CryptoWorker,"crypto",4);case 3:CryptoWorker._workerAsync=e.sent;case 4:return e.abrupt("return",CryptoWorker._workerAsync);case 5:case"end":return e.stop()}},_callee30)}));return function getInstanceAsync(){return e.apply(this,arguments)}}()},{key:"lib",get:function get(){return o.instance}}]);return CryptoWorker}();W._workerAsync=null;r.register(W);var q=function(){function CryptoUtils(){(0,_classCallCheck2["default"])(this,CryptoUtils)}(0,_createClass2["default"])(CryptoUtils,null,[{key:"computeHmacSha512",value:function computeHmacSha512(e,t){e.length>CryptoUtils.SHA512_BLOCK_SIZE&&(e=new y(E.computeSha512(e)));for(var r=new y(CryptoUtils.SHA512_BLOCK_SIZE),n=new y(CryptoUtils.SHA512_BLOCK_SIZE),i=0;i<CryptoUtils.SHA512_BLOCK_SIZE;++i){var a=e[i]||0;r[i]=54^a;n[i]=92^a}var o=E.computeSha512(f.concatTypedArrays(r,t));return E.computeSha512(f.concatTypedArrays(n,o))}},{key:"computePBKDF2sha512",value:function computePBKDF2sha512(e,t,r,n){var i=E.SIZE.get(E.Algorithm.SHA512);if(n>(Math.pow(2,32)-1)*i)throw new Error("Derived key too long");for(var a=Math.ceil(n/i),o=n-(a-1)*i,s=new y(n),u=1;u<=a;u++){var l=new y(t.length+4);l.write(t);l.writeUint32(u);for(var c=l=CryptoUtils.computeHmacSha512(e,l),f=1;f<r;f++){l=CryptoUtils.computeHmacSha512(e,l);for(var d=0;d<c.length;d++)c[d]^=l[d]}u<a?s.write(c):s.write(c.slice(0,o))}return s}},{key:"otpKdfLegacy",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee31(e,t,r,n){var i,a;return _regenerator["default"].wrap(function _callee31$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return W.getInstanceAsync();case 2:i=o.sent;o.next=5;return i.kdfLegacy(t,r,n,e.byteLength);case 5:a=o.sent;return o.abrupt("return",f.xor(e,a));case 7:case"end":return o.stop()}},_callee31)}));return function otpKdfLegacy(t,r,n,i){return e.apply(this,arguments)}}()},{key:"otpKdf",value:function(){var e=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark(function _callee32(e,t,r,n){var i,a;return _regenerator["default"].wrap(function _callee32$(o){for(;;)switch(o.prev=o.next){case 0:o.next=2;return W.getInstanceAsync();case 2:i=o.sent;o.next=5;return i.kdf(t,r,n,e.byteLength);case 5:a=o.sent;return o.abrupt("return",f.xor(e,a));case 7:case"end":return o.stop()}},_callee32)}));return function otpKdf(t,r,n,i){return e.apply(this,arguments)}}()}]);return CryptoUtils}();q.SHA512_BLOCK_SIZE=128;r.register(q);var F=function(){function GenesisConfig(){(0,_classCallCheck2["default"])(this,GenesisConfig)}(0,_createClass2["default"])(GenesisConfig,null,[{key:"main",value:function main(){GenesisConfig.init(GenesisConfig.CONFIGS.main)}},{key:"test",value:function test(){GenesisConfig.init(GenesisConfig.CONFIGS.test)}},{key:"dev",value:function dev(){GenesisConfig.init(GenesisConfig.CONFIGS.dev)}},{key:"init",value:function init(e){if(GenesisConfig._config)throw new Error("GenesisConfig already initialized");if(!e.NETWORK_ID)throw new Error("Config is missing network id");if(!e.NETWORK_NAME)throw new Error("Config is missing network name");GenesisConfig._config=e}},{key:"NETWORK_ID",get:function get(){if(!GenesisConfig._config)throw new Error("GenesisConfig not initialized");return GenesisConfig._config.NETWORK_ID}},{key:"NETWORK_NAME",get:function get(){if(!GenesisConfig._config)throw new Error("GenesisConfig not initialized");return GenesisConfig._config.NETWORK_NAME}}]);return GenesisConfig}();r.register(F);F.CONFIGS={main:{NETWORK_ID:42,NETWORK_NAME:"main"},test:{NETWORK_ID:1,NETWORK_NAME:"test"},dev:{NETWORK_ID:2,NETWORK_NAME:"dev"}};e._loaded=!0;"function"==typeof e._onload&&e._onload()}(Nimiq);
//# sourceMappingURL=web-offline-babel.js.map
